<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>MySQL基础入门 | Java学习笔记</title><meta name="keywords" content="MySQL"><meta name="author" content="Java学习笔记"><meta name="copyright" content="Java学习笔记"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Binary 的缩写, 这个目录存放着最经常使用的命令">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL基础入门">
<meta property="og:url" content="https://www.hckun.cn/post/30720df8.html">
<meta property="og:site_name" content="Java学习笔记">
<meta property="og:description" content="Binary 的缩写, 这个目录存放着最经常使用的命令">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://images.hckun.cn/1666330355.jpg">
<meta property="article:published_time" content="2022-10-31T14:00:00.000Z">
<meta property="article:modified_time" content="2022-10-31T14:32:23.902Z">
<meta property="article:author" content="Java学习笔记">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://images.hckun.cn/1666330355.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.hckun.cn/post/30720df8"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Java学习笔记","link":"链接: ","source":"来源: Java学习笔记","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL基础入门',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-31 22:32:23'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/footer.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/mine/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://images.hckun.cn/1666330355.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Java学习笔记</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/mine/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL基础入门</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-31T14:00:00.000Z" title="发表于 2022-10-31 22:00:00">2022-10-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-31T14:32:23.902Z" title="更新于 2022-10-31 22:32:23">2022-10-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">16.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>68分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL基础入门"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>本文参考:<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1H64y1U7GJ/?spm_id_from=333.999.0.0&vd_source=5bcea3f1cf65eb3c1d5d1bfe60ef886d">[韩顺平讲MySQL]零基础一周学会MySQL</a></p>
<h2 id="1、MySQL5-7-19安装"><a href="#1、MySQL5-7-19安装" class="headerlink" title="1、MySQL5.7.19安装"></a>1、MySQL5.7.19安装</h2><ol>
<li><p>下载安装包并解压到无中文路径文件夹下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">下载地址:https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.19-winx64.zip</span><br></pre></td></tr></table></figure></li>
<li><p>添加环境变量</p>
<p>电脑-属性-高级系统设置-环境变量，在Path 环境变量增加mysql的安装目录\bin目录</p>
<p><img src="https://images.hckun.cn/image-20221031215040585.png" alt="image-20221031215040585"></p>
</li>
<li><p>在D:\hspmysql\mysql-5.7.19-winx64 目录下下创建 my.ini 文件,写入以下内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line"></span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置为自己MYSQL的安装目录</span></span><br><span class="line"></span><br><span class="line">basedir=D:\hspmysql\mysql-5.7.19-winx64\</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置为MYSQL的数据目录</span></span><br><span class="line"></span><br><span class="line">datadir=D:\hspmysql\mysql-5.7.19-winx64\data\</span><br><span class="line"></span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">character_set_server=utf8</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">跳过安全检查</span></span><br><span class="line"></span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure></li>
<li><p>使用<strong>管理员身份</strong>打开 cmd , 并切换到 D:\hspmysql\mysql-5.7.19-winx64\bin 目录下</p>
<p>执行<code>mysqld -install</code></p>
</li>
<li><p>初始化数据库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize-insecure --user=mysql</span><br></pre></td></tr></table></figure>

<p>如果执行成功，会在<code>my.ini</code>同级目录生成 data目录</p>
</li>
<li><p>启动mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net start mysql #启动mysql</span><br><span class="line">net stop mysql  #停止mysql</span><br></pre></td></tr></table></figure></li>
<li><p>进入mysql 管理终端</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p #回车无需输入密码</span><br></pre></td></tr></table></figure></li>
<li><p>修改root 用户密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql; </span><br><span class="line">update user set authentication_string=password(&#x27;123456&#x27;) where user=&#x27;root&#x27; and Host=&#x27;localhost&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></li>
<li><p>修改my.ini , 再次进入就会进行权限验证了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">skip-grant-tables</span> </span><br></pre></td></tr></table></figure></li>
<li><p>重新启动mysql</p>
</li>
</ol>
<h2 id="2、数据库操作"><a href="#2、数据库操作" class="headerlink" title="2、数据库操作"></a>2、数据库操作</h2><h3 id="2-1、创建数据库"><a href="#2-1、创建数据库" class="headerlink" title="2.1、创建数据库"></a>2.1、创建数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法:	<span class="keyword">CREATE</span> DATABASE [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] db_name</span><br><span class="line">	[create_specification[,create_specification]...]</span><br><span class="line">create_specification</span><br><span class="line">	[<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> charset_name</span><br><span class="line">	[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> collation_name</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>CHARACTER SET:指定数据库采用的字符集,如果不指定字符集,默认utf8</li>
<li>COLLATE:指定数据库字符集的校对规则(常用的utf8_bin[区分大小写],utf8_general_ci[不区分大小写])</li>
<li>注意:默认是utf8_general_ci</li>
</ol>
</blockquote>
<ul>
<li><p>创建一个数据库db01</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE db01</span><br></pre></td></tr></table></figure></li>
<li><p>创建一个字符集为utf8的db02数据库并指定校验规则为utf8_general_ci</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE db02 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci</span><br></pre></td></tr></table></figure></li>
<li><p>创建一个字符集为utf8的db03数据库并指定校验规则为utf8_bin</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE db03 CHARACTER SET utf8 COLLATE utf8_bin</span><br></pre></td></tr></table></figure>

<p>在db02和db03中创建一张相同的表,插入相同的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> (id <span class="type">INT</span>, name <span class="type">VARCHAR</span>(<span class="number">25</span>))</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="string">&#x27;Tom&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>分别在两个数据库中执行下面查询语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;tom&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>我们发现在db02中查询出了两条数据,而在db03中只查询出了一条数据;这种因为db02数据库采用的校验规则为utf8_general_ci不区分大小写;db03数据库采用的utf8_bin的校验规则是区分大小写的。</p>
</blockquote>
</li>
</ul>
<h3 id="2-2、查看所有数据库"><a href="#2-2、查看所有数据库" class="headerlink" title="2.2、查看所有数据库"></a>2.2、查看所有数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW DATABASES</span><br></pre></td></tr></table></figure>

<h3 id="2-3、查看当前数据库的定义信息"><a href="#2-3、查看当前数据库的定义信息" class="headerlink" title="2.3、查看当前数据库的定义信息"></a>2.3、查看当前数据库的定义信息</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE db02</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE `db02` <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8 */</span></span><br></pre></td></tr></table></figure>

<p>我们在创建数据库、表的时候，为了规避关键字，可以使用反引号解决。</p>
<h3 id="2-4、删除数据库"><a href="#2-4、删除数据库" class="headerlink" title="2.4、删除数据库"></a>2.4、删除数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE db01</span><br></pre></td></tr></table></figure>

<h3 id="2-5、备份数据库"><a href="#2-5、备份数据库" class="headerlink" title="2.5、备份数据库"></a>2.5、备份数据库</h3><p>​    在DOS命令中执行</p>
<ul>
<li>备份整个数据库</li>
</ul>
<p>​        mysqldump -u 用户名 -p -B  数据库1  数据库2  数据库n  &gt; 文件名.sql</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>u root <span class="operator">-</span>p <span class="operator">-</span>B db02 <span class="operator">&gt;</span>E:\\copy.sql</span><br></pre></td></tr></table></figure>

<ul>
<li><p>备份数据库中指定表</p>
<p>mysqldump -u 用户名 -p 数据库 表1 表2 表n &gt;文件名.sql</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>u root <span class="operator">-</span>p db02 <span class="keyword">user</span> <span class="operator">&gt;</span> E:\\user.sql</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-6、恢复数据库"><a href="#2-6、恢复数据库" class="headerlink" title="2.6、恢复数据库"></a>2.6、恢复数据库</h3><p>​    进入MySQL命令行再执行</p>
<p>​    sourse  文件名.sql</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> source E:\\copy.sql</span><br></pre></td></tr></table></figure>

<h2 id="3-表结构操作"><a href="#3-表结构操作" class="headerlink" title="3.表结构操作"></a>3.表结构操作</h2><h3 id="3-1、创建表"><a href="#3-1、创建表" class="headerlink" title="3.1、创建表"></a>3.1、创建表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name(</span><br><span class="line">	field1 datatype,</span><br><span class="line">    field2 datatype,</span><br><span class="line">    field3 datatype</span><br><span class="line">)<span class="type">character</span> <span class="keyword">set</span> 字符集	<span class="keyword">collate</span>	校对规则	engine 存储引擎</span><br><span class="line">field:指定列表	datatype:指定列类型(字段类型)</span><br><span class="line"><span class="type">character</span> <span class="keyword">set</span>:如不指定则为所在数据库字符集</span><br><span class="line"><span class="keyword">collate</span>: 如不指定则为所在数据库校对规则</span><br><span class="line">engine:	引擎</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一张user表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span>(</span><br><span class="line">	`id` <span class="type">INT</span>,</span><br><span class="line">	`name`	<span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">	`birthday` <span class="type">DATE</span>	</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="3-2、MySQL常用数据类型"><a href="#3-2、MySQL常用数据类型" class="headerlink" title="3.2、MySQL常用数据类型"></a>3.2、MySQL常用数据类型</h3><h4 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h4><table>
<thead>
<tr>
<th align="center">数据类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BIT(M)</td>
<td align="center">位类型。M指定位数，默认值是1，范围1-64</td>
</tr>
<tr>
<td align="center">TINYINT[UNSIGNED]占1个字节</td>
<td align="center">带符号的范围是-128到127。无符号0-255。默认是有符号</td>
</tr>
<tr>
<td align="center">SMALLINT[UNSIGEND]占2个字节</td>
<td align="center">带符号是-2^15到2^15-1。无符号0-2^16-1</td>
</tr>
<tr>
<td align="center">MEDIUMINT[UNSIGEND]3个字节</td>
<td align="center">到符号是-2^23-2^23-1。无符号0-2^64-1</td>
</tr>
<tr>
<td align="center">INT[UNSIGEND]4个字节</td>
<td align="center">带符号是-2^31-2^31-1。无符号是0-2^32-1</td>
</tr>
<tr>
<td align="center">BIGINT[UNSIGEND]8个字节</td>
<td align="center">带符号是-2^63-1-2^63-1。无符号是0-2^64-1</td>
</tr>
<tr>
<td align="center">FLOAT[UNSIGEND]</td>
<td align="center">占用空间4个字节,单精度</td>
</tr>
<tr>
<td align="center">DOUBLE[UNSIGEND]</td>
<td align="center">表示比float经度更大的小数,占用空间8个字节</td>
</tr>
<tr>
<td align="center">DECIMAL(M,D)[UNSIGEND]8个字节</td>
<td align="center">定点数M指定长度,D表示小数点的位数。如果D是0,则值没有小数或分数部分。M最大是65，D最大是30。如果D被省略，默认是0。如果M被省略，默认是10</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--无符号有符号的区别</span></span><br><span class="line"><span class="comment">--创建TINYINT类型id,默认是有符号范围为-128-127</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t1(</span><br><span class="line">	`id` TINYINT</span><br><span class="line">)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t1 <span class="keyword">VALUES</span>(<span class="number">-129</span>) <span class="comment">--Out of range value for column &#x27;id&#x27; at row 1</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t1 <span class="keyword">VALUES</span>(<span class="number">-128</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t1 <span class="keyword">VALUES</span>(<span class="number">128</span>)<span class="comment">--Out of range value for column &#x27;id&#x27; at row 1</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t1 <span class="keyword">VALUES</span>(<span class="number">127</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t1</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建TINYINT UNSIGNED类型,无符号类型范围0-255</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t2(</span><br><span class="line">	`id` TINYINT UNSIGNED</span><br><span class="line">)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t2 <span class="keyword">VALUES</span>(<span class="number">-1</span>)<span class="comment">--Out of range value for column &#x27;id&#x27; at row 1</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t2 <span class="keyword">VALUES</span>(<span class="number">256</span>)<span class="comment">--Out of range value for column &#x27;id&#x27; at row 1</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t2 <span class="keyword">VALUES</span>(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t2</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 演示decimal、float、double使用</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t3(</span><br><span class="line">	num1 <span class="type">FLOAT</span>,</span><br><span class="line">	num2 <span class="keyword">DOUBLE</span>,</span><br><span class="line">	num3 <span class="type">DECIMAL</span>(<span class="number">30</span>,<span class="number">20</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t3 <span class="keyword">VALUES</span>(<span class="number">88.12345678</span>,<span class="number">88.123456789123456</span>,<span class="number">88.123456789123456789</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t3</span><br></pre></td></tr></table></figure>

<p><img src="https://images.hckun.cn/image-20211024215955918.png" alt="image-20211024215955918"></p>
<h4 id="文本、二进制类型"><a href="#文本、二进制类型" class="headerlink" title="文本、二进制类型"></a>文本、二进制类型</h4><table>
<thead>
<tr>
<th>数据类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>CHAR(size) char(20)</td>
<td>固定长度字符串最大255</td>
</tr>
<tr>
<td>VARCHAR(size) varchar(20)</td>
<td>可变长度字符串0-65535[即2^16-1]</td>
</tr>
<tr>
<td>BLOB    LONGBLOB</td>
<td>二进制数据BLOB[0-2^16-1]    LONGBLOB[0-2^32-1]</td>
</tr>
<tr>
<td>TEXT    LONGTEXT</td>
<td>文本Text[0-2^16-1]    LONGTEXT[0-2^32]</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- CHAR(size)</span></span><br><span class="line"><span class="comment">-- 固定长度字符串 最大255字符</span></span><br><span class="line"><span class="comment">-- VARCHAR(size)	0-65535字节</span></span><br><span class="line"><span class="comment">-- 可变长度字符串 最大65532字节 [utf8编码最大21844字符 1-3个字节用于记录大小]</span></span><br><span class="line"><span class="comment">-- 如果表的编码是utf8 varchar(size) size = (65535-3)/3=21844</span></span><br><span class="line"><span class="comment">-- 如果表的编码是 gbk varchar(size) size = (65535-3)/2=32766</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t4(</span><br><span class="line">	`name` <span class="type">CHAR</span>(<span class="number">255</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t5(</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">21844</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t6(</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">32766</span>)</span><br><span class="line">)<span class="type">CHARACTER</span> <span class="keyword">SET</span> gbk</span><br></pre></td></tr></table></figure>

<h4 id="时间日期类型"><a href="#时间日期类型" class="headerlink" title="时间日期类型"></a>时间日期类型</h4><table>
<thead>
<tr>
<th>数据类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>DATE/DATETIME/Time/TimeStamp</td>
<td>DATE存储年月日;DATETIME存储年月日时分秒;Time存储时分秒;TimeStamp存储时间戳</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 日期类型测试</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t7(</span><br><span class="line">	birthday <span class="type">DATE</span>,</span><br><span class="line">	jobdate	DATETIME,</span><br><span class="line">	startDate <span class="type">TIME</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t7 <span class="keyword">VALUES</span>(<span class="string">&#x27;2021-10-24&#x27;</span>,<span class="string">&#x27;2021-10-24 22:39:30&#x27;</span>, <span class="string">&#x27;22:40:00&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t7</span><br></pre></td></tr></table></figure>

<p><img src="https://images.hckun.cn/image-20211024224039141.png" alt="image-20211024224039141"></p>
<h4 id="SQL练习"><a href="#SQL练习" class="headerlink" title="SQL练习"></a>SQL练习</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t8(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">32</span>),</span><br><span class="line">	sex <span class="type">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">	birthday <span class="type">DATE</span>,</span><br><span class="line">	entry_date DATETIME,</span><br><span class="line">	job <span class="type">VARCHAR</span>(<span class="number">32</span>),</span><br><span class="line">	salary <span class="keyword">DOUBLE</span>,</span><br><span class="line">	resume TEXT</span><br><span class="line">)<span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci ENGINE INNODB</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t8 <span class="keyword">VALUES</span>(<span class="number">1</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;2021-10-24&#x27;</span>, <span class="string">&#x27;2021-10-24 22:52:30&#x27;</span>,<span class="string">&#x27;程序员&#x27;</span>, <span class="number">5500</span>, <span class="string">&#x27;我是张三&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t8</span><br></pre></td></tr></table></figure>

<p><img src="https://images.hckun.cn/image-20211024225413163.png" alt="image-20211024225413163"></p>
<h3 id="3-3、修改表"><a href="#3-3、修改表" class="headerlink" title="3.3、修改表"></a>3.3、修改表</h3><ul>
<li><p>添加列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename</span><br><span class="line">	<span class="keyword">ADD</span>	(<span class="keyword">column</span> datatype [<span class="keyword">DEFAULT</span> expr]  [,colum datatype]...)</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 给t8表增加一个字段 image 类型为varchar 放在job后面</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t8 <span class="keyword">ADD</span> image <span class="type">VARCHAR</span>(<span class="number">100</span>) AFTER job</span><br></pre></td></tr></table></figure></li>
<li><p>修改列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename</span><br><span class="line">	MODIFY	(<span class="keyword">column</span> datatype [<span class="keyword">DEFAULT</span> expr] [,<span class="keyword">column</span> datatype]...)</span><br><span class="line"><span class="comment">-- 修改t8表job字段的长度为100</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t8 MODIFY job <span class="type">VARCHAR</span>(<span class="number">100</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>删除列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename</span><br><span class="line">	<span class="keyword">DROP</span> (<span class="keyword">column</span>)</span><br><span class="line"><span class="comment">-- 删除t8表的性别字段</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t8 <span class="keyword">DROP</span> sex</span><br></pre></td></tr></table></figure></li>
<li><p>修改表名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME <span class="keyword">TABLE</span> t8 <span class="keyword">TO</span> t</span><br></pre></td></tr></table></figure></li>
<li><p>修改表的字符集</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t9 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8</span><br></pre></td></tr></table></figure></li>
<li><p>修改字段名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t9 CHANGE `name` user_name <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-4、查看表结构"><a href="#3-4、查看表结构" class="headerlink" title="3.4、查看表结构"></a>3.4、查看表结构</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> t8</span><br></pre></td></tr></table></figure>

<p><img src="https://images.hckun.cn/image-20211024230047397.png" alt="image-20211024230047397"></p>
<h3 id="3-5、删除表"><a href="#3-5、删除表" class="headerlink" title="3.5、删除表"></a>3.5、删除表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> t1</span><br></pre></td></tr></table></figure>

<h2 id="4、数据库CRUD"><a href="#4、数据库CRUD" class="headerlink" title="4、数据库CRUD"></a>4、数据库CRUD</h2><h3 id="4-1、INSERT"><a href="#4-1、INSERT" class="headerlink" title="4.1、INSERT"></a>4.1、INSERT</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法: <span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name [(<span class="keyword">column</span> [,column...])]</span><br><span class="line">			<span class="keyword">VALUES</span> (<span class="keyword">value</span> [, value...])</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> good(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	good_name <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">	price <span class="keyword">DOUBLE</span></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加单个数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> good (id,good_name,price) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;电脑&#x27;</span>,<span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--添加多条数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> good (id,good_name,price) <span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="string">&#x27;手机&#x27;</span>,<span class="number">1000</span>),(<span class="number">3</span>,<span class="string">&#x27;电视机&#x27;</span>,<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> good</span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项:"></a>注意事项:</h4><ol>
<li><p>插入的数据应与字段的数据类型相同。比如把’abc’添加到int类型会错误</p>
</li>
<li><p>数据的长度应在列的规定范围内,例如:不能将一个长度为80的字符串加入到长度为40的列中</p>
</li>
<li><p>在values中列出的数据位置必须与被加入的列的排列位置相对应</p>
</li>
<li><p>字符和日期类型数据应包含在单引号中</p>
</li>
<li><p>列可以插入空值[前提是该字段允许为空]</p>
</li>
<li><p>insert into tab_name (列名…) values (),(),()形式添加多条记录</p>
</li>
<li><p>如果是给表中的所有字段添加数据,可以不写前面的字段名称</p>
</li>
<li><p>默认值的使用,当不给某个字段值时,如果有默认值就会添加,否则报错</p>
</li>
</ol>
<p>  如果某个列没有指定not null ,那么当添加数据时,没有给定值,则会给null</p>
<p>  如果我们希望指定某个列的默认值,可以在创建表时指定</p>
</blockquote>
<h3 id="4-2、UPDATE"><a href="#4-2、UPDATE" class="headerlink" title="4.2、UPDATE"></a>4.2、UPDATE</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法：<span class="keyword">UPDATE</span> tab——name</span><br><span class="line">		<span class="keyword">SET</span> col_name1 <span class="operator">=</span> expr1 [, col_name2 <span class="operator">=</span> expr2...]</span><br><span class="line">			[<span class="keyword">WHERE</span> where_definition]</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 全部修改</span></span><br><span class="line"><span class="keyword">UPDATE</span> good <span class="keyword">SET</span> price <span class="operator">=</span> <span class="number">5000</span> </span><br><span class="line"><span class="comment">-- 根据条件单个修改</span></span><br><span class="line"><span class="keyword">UPDATE</span> good <span class="keyword">SET</span> price <span class="operator">=</span> <span class="number">1000</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">UPDATE</span> good <span class="keyword">SET</span> price <span class="operator">=</span> price <span class="operator">+</span> <span class="number">500</span> <span class="keyword">WHERE</span> good_name <span class="operator">=</span> <span class="string">&#x27;手机&#x27;</span> </span><br><span class="line"><span class="comment">-- 多字段修改</span></span><br><span class="line"><span class="keyword">UPDATE</span> good <span class="keyword">SET</span> good_name <span class="operator">=</span> <span class="string">&#x27;汽车&#x27;</span>, price <span class="operator">=</span> <span class="number">10000</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>UPDATE语法可以用新值更新原有表行中的各列</li>
<li>SET子句指示要修改哪些列和要给予那些值</li>
<li>WHERE子句指定应更新哪些行。如果没有WHERE子句，则更新所有的行</li>
<li>如果需要修改多个字段，可以通过 set字段1 = 值1，字段2 = 值2</li>
</ol>
</blockquote>
<h3 id="4-3、DELETE"><a href="#4-3、DELETE" class="headerlink" title="4.3、DELETE"></a>4.3、DELETE</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法:<span class="keyword">delete</span> <span class="keyword">from</span> tbl_name</span><br><span class="line">		[<span class="keyword">WHERE</span> where_definition]</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除单条数据</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> good <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="comment">-- 删除全部</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> good</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>如果不使用where子句,将删除表中所有数据</li>
<li>Delete语句不能删除某一列的值(可使用update设为null或者’’)</li>
<li>使用delete语句仅删除记录,不删除表本身。如果要删除表，使用drop table语句。drop table 表名</li>
</ol>
</blockquote>
<h3 id="4-4、SELECT"><a href="#4-4、SELECT" class="headerlink" title="4.4、SELECT"></a>4.4、SELECT</h3><h4 id="单表"><a href="#单表" class="headerlink" title="单表"></a>单表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">DISTINCT</span>] <span class="operator">*</span> <span class="operator">|</span> &#123;column1, column2, column3 ... &#125;</span><br><span class="line">		<span class="keyword">FROM</span> tablename</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>,</span><br><span class="line">	NAME <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	chinese <span class="type">FLOAT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0.0</span>,</span><br><span class="line">	english <span class="type">FLOAT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0.0</span>,</span><br><span class="line">	math <span class="type">FLOAT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0.0</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student(id,NAME,chinese,english,math) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;韩顺平&#x27;</span>,<span class="number">89</span>,<span class="number">78</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student(id,NAME,chinese,english,math) <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;张飞&#x27;</span>,<span class="number">67</span>,<span class="number">98</span>,<span class="number">56</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student(id,NAME,chinese,english,math) <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;宋江&#x27;</span>,<span class="number">87</span>,<span class="number">78</span>,<span class="number">77</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student(id,NAME,chinese,english,math) <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;关羽&#x27;</span>,<span class="number">88</span>,<span class="number">98</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student(id,NAME,chinese,english,math) <span class="keyword">VALUES</span>(<span class="number">5</span>,<span class="string">&#x27;赵云&#x27;</span>,<span class="number">82</span>,<span class="number">84</span>,<span class="number">67</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student(id,NAME,chinese,english,math) <span class="keyword">VALUES</span>(<span class="number">6</span>,<span class="string">&#x27;欧阳锋&#x27;</span>,<span class="number">55</span>,<span class="number">85</span>,<span class="number">45</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student(id,NAME,chinese,english,math) <span class="keyword">VALUES</span>(<span class="number">7</span>,<span class="string">&#x27;黄蓉&#x27;</span>,<span class="number">75</span>,<span class="number">65</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student(id,NAME,chinese,english,math) <span class="keyword">VALUES</span>(<span class="number">8</span>,<span class="string">&#x27;韩信&#x27;</span>,<span class="number">45</span>,<span class="number">65</span>,<span class="number">99</span>);</span><br><span class="line"><span class="comment">-- 查询表中所有学生的信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 查询表中所有学生的姓名和对应的英语成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> `name`, english <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 过滤表中重复数据 distinct</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 要查询的记录，每个字段都相同，才会去重</span></span><br><span class="line"><span class="keyword">SELECT</span> DITINCT math <span class="keyword">FROM</span> student</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用表达式对查询的列进行计算</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="operator">|</span> &#123;column1 <span class="operator">|</span> erpression, column2 <span class="operator">|</span> expression...&#125;</span><br><span class="line">		<span class="keyword">FROM</span> tablename;</span><br><span class="line">在<span class="keyword">select</span>语句中可使用<span class="keyword">as</span>语句</span><br><span class="line"><span class="keyword">SELECT</span> column_name <span class="keyword">as</span> 别名 <span class="keyword">from</span> 表名</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 统计每个学生的总分</span></span><br><span class="line"><span class="keyword">SELECT</span> `name`,(chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 在所有学生总分加10分的情况</span></span><br><span class="line"><span class="keyword">SELECT</span> `name`, (chinese <span class="operator">+</span> english <span class="operator">+</span> math <span class="operator">+</span> <span class="number">10</span>) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 使用别名表示学生分数</span></span><br><span class="line"><span class="keyword">SELECT</span> 	`name`, (chinese <span class="operator">+</span>english <span class="operator">+</span> math) <span class="keyword">as</span> score <span class="keyword">FROM</span> student</span><br></pre></td></tr></table></figure>

<h4 id="常用运算符"><a href="#常用运算符" class="headerlink" title="常用运算符"></a>常用运算符</h4><p><img src="https://images.hckun.cn/image-20211025233214828.png" alt="image-20211025233214828"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询姓名为赵云的学生成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> `name` <span class="operator">=</span> <span class="string">&#x27;赵云&#x27;</span></span><br><span class="line"><span class="comment">-- 查询英语成绩大于90分的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> english <span class="operator">&gt;</span> <span class="number">90</span></span><br><span class="line"><span class="comment">-- 查询总分大于200分的所有同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> (chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="operator">&gt;</span> <span class="number">200</span></span><br><span class="line"><span class="comment">-- 查询math大于60 并且(and) id大于4的学生成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> math <span class="operator">&gt;=</span> <span class="number">60</span> <span class="keyword">and</span> id <span class="operator">&gt;</span> <span class="number">4</span></span><br><span class="line"><span class="comment">-- 查询英语成绩大于语文成绩的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> english <span class="operator">&gt;</span> chinese</span><br><span class="line"><span class="comment">-- 查询总分大于200分 并且 数学成绩小于语文成绩,的姓赵的学生</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> (chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="operator">&gt;</span> <span class="number">200</span> <span class="keyword">AND</span> math <span class="operator">&lt;</span> chinese <span class="keyword">AND</span> `name` <span class="keyword">like</span> <span class="string">&#x27;赵%&#x27;</span></span><br><span class="line"><span class="comment">-- 查询英语分数在 80－90之间的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> english <span class="keyword">BETWEEN</span> <span class="number">80</span> <span class="keyword">AND</span> <span class="number">90</span></span><br><span class="line"><span class="comment">-- 查询数学分数为89,90,91的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> math <span class="operator">=</span> <span class="number">89</span> <span class="keyword">OR</span> math <span class="operator">=</span> <span class="number">90</span> <span class="keyword">OR</span> math <span class="operator">=</span> <span class="number">91</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> math <span class="keyword">in</span> (<span class="number">89</span>,<span class="number">90</span>,<span class="number">91</span>)</span><br><span class="line"><span class="comment">-- 查询所有姓李的学生成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">where</span> `name` <span class="keyword">like</span> <span class="string">&#x27;%李&#x27;</span></span><br><span class="line"><span class="comment">-- 查询数学分&gt;80，语文分&gt;80的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> math <span class="operator">&gt;</span> <span class="number">80</span> <span class="keyword">AND</span> chinese <span class="operator">&gt;</span><span class="number">80</span></span><br><span class="line"><span class="comment">-- 查询总分为189 190 191 的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> (chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">in</span> (<span class="number">209</span>,<span class="number">190</span>,<span class="number">191</span>)</span><br><span class="line"><span class="comment">-- 查询所以姓李或者姓宋的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> `name` <span class="keyword">LIKE</span> <span class="string">&#x27;李%&#x27;</span> <span class="keyword">OR</span> `name` <span class="keyword">LIKE</span> <span class="string">&#x27;宋%&#x27;</span></span><br><span class="line"><span class="comment">-- 查询数学比语文多30分的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> math <span class="operator">-</span> chinese <span class="operator">=</span> <span class="number">30</span></span><br></pre></td></tr></table></figure>

<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1,column2,column3 ..</span><br><span class="line">	<span class="keyword">FROM</span> <span class="keyword">table</span>;</span><br><span class="line">	<span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">column</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>Order by指定排序的列,排序的列即可以是表中的列名,也可以是select语句后指定的别名</li>
<li>Asc升序[默认]、Desc降序</li>
<li>Order by 子句应位于SELECT语句的结尾</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 对数学成绩排序后输出[升序]</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> math </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对总分按从高到低的顺序输出[降序]</span></span><br><span class="line"><span class="keyword">SELECT</span> `name`,(english <span class="operator">+</span> chinese <span class="operator">+</span> math) <span class="keyword">AS</span> score <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> score <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对姓韩的学生成绩[总分]排序输出[升序]</span></span><br><span class="line"><span class="keyword">SELECT</span> `name`,(chinese<span class="operator">+</span>english<span class="operator">+</span>math) <span class="keyword">AS</span> score <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> `name` <span class="keyword">LIKE</span> <span class="string">&#x27;韩%&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> score</span><br></pre></td></tr></table></figure>

<h3 id="4-5、统计函数"><a href="#4-5、统计函数" class="headerlink" title="4.5、统计函数"></a>4.5、统计函数</h3><h4 id="count"><a href="#count" class="headerlink" title="count"></a>count</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">|</span> <span class="built_in">COUNT</span>(列名) <span class="keyword">from</span> tablename</span><br><span class="line">	[<span class="keyword">WHERE</span> where_definition]</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 统计一个班级共有多少学生</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 统计数学成绩大于90的学生有多少个</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> math <span class="operator">&gt;</span><span class="number">90</span></span><br><span class="line"><span class="comment">-- 统计总分大于250的人数有多少</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> (english <span class="operator">+</span> chinese <span class="operator">+</span> math) <span class="operator">&gt;</span> <span class="number">250</span></span><br><span class="line"><span class="comment">-- count(*) 和 count(列) 的区别 </span></span><br><span class="line"><span class="comment">-- count(*) 返回满足条件的记录的行数</span></span><br><span class="line"><span class="comment">-- count(列) 统计满足条件的某列有多少个,但是会排除为null的情况</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t10 (</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t10 <span class="keyword">VALUES</span>(<span class="string">&#x27;tom&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t10 <span class="keyword">VALUES</span>(<span class="string">&#x27;jerry&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t10 <span class="keyword">VALUES</span>(<span class="string">&#x27;kangkang&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t10 <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> t10 <span class="comment">-- 4</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(`name`) <span class="keyword">FROM</span> t10 <span class="comment">-- 3</span></span><br></pre></td></tr></table></figure>

<h4 id="sum"><a href="#sum" class="headerlink" title="sum"></a>sum</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">sum</span>(列名) &#123;,<span class="built_in">sum</span>(列名)...&#125; <span class="keyword">FROM</span> tablename</span><br><span class="line">	[<span class="keyword">WHERE</span> where_definition]</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 统计一个班级数学总成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(math) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 统计一个班级语文、英语、数学各科的总成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(chinese),<span class="built_in">SUM</span>(english),<span class="built_in">SUM</span>(math) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 统计一个班级语文、英语、数学的成绩总和</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 统计一个班级语文成绩平均分</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(chinese)<span class="operator">/</span><span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(chinese) <span class="keyword">FROM</span> student</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>sum仅对数值起作用,否则会报错</li>
<li>对多列求和, “,”号不能少</li>
</ol>
</blockquote>
<h4 id="avg"><a href="#avg" class="headerlink" title="avg"></a>avg</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">avg</span>(列名) &#123;,<span class="built_in">avg</span>(列名)...&#125; <span class="keyword">FROM</span> tablename</span><br><span class="line">	[<span class="keyword">WHERE</span> where_definition]</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 求一个班级数学平均分</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(math) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 求一个班级总分平均分</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">FROM</span> student</span><br></pre></td></tr></table></figure>

<h4 id="max-min"><a href="#max-min" class="headerlink" title="max/min"></a>max/min</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">max</span>(列名) <span class="keyword">FROM</span> tablename</span><br><span class="line">	[<span class="keyword">WHERE</span> where_definition]</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 求班级最高分和最低分</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(chinese <span class="operator">+</span> english <span class="operator">+</span> math), <span class="built_in">MIN</span>(chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 求出班级数学最高分和最低分</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(math),<span class="built_in">MIN</span>(math) <span class="keyword">FROM</span> student</span><br></pre></td></tr></table></figure>

<h4 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, column3.. <span class="keyword">FROM</span> <span class="keyword">table</span></span><br><span class="line">		<span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">column</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用having子句对分组后的结果进行过滤</span></span><br><span class="line"><span class="keyword">SELECT</span> column1,column2,column3...</span><br><span class="line">		<span class="keyword">FROM</span> <span class="keyword">table</span></span><br><span class="line">			<span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">column</span> having...</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 数据准备</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept( <span class="comment">/*部门表*/</span></span><br><span class="line">deptno MEDIUMINT   UNSIGNED  <span class="keyword">NOT</span> <span class="keyword">NULL</span>  <span class="keyword">DEFAULT</span> <span class="number">0</span>, </span><br><span class="line">dname <span class="type">VARCHAR</span>(<span class="number">20</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>  <span class="keyword">DEFAULT</span> &quot;&quot;,</span><br><span class="line">loc <span class="type">VARCHAR</span>(<span class="number">13</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> &quot;&quot;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">VALUES</span>(<span class="number">10</span>, <span class="string">&#x27;ACCOUNTING&#x27;</span>, <span class="string">&#x27;NEW YORK&#x27;</span>), </span><br><span class="line">(<span class="number">20</span>, <span class="string">&#x27;RESEARCH&#x27;</span>, <span class="string">&#x27;DALLAS&#x27;</span>), </span><br><span class="line">(<span class="number">30</span>, <span class="string">&#x27;SALES&#x27;</span>, <span class="string">&#x27;CHICAGO&#x27;</span>), </span><br><span class="line">(<span class="number">40</span>, <span class="string">&#x27;OPERATIONS&#x27;</span>, <span class="string">&#x27;BOSTON&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dept;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp</span><br><span class="line">(empno  MEDIUMINT UNSIGNED  <span class="keyword">NOT</span> <span class="keyword">NULL</span>  <span class="keyword">DEFAULT</span> <span class="number">0</span>, <span class="comment">/*编号*/</span></span><br><span class="line">ename <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> &quot;&quot;, <span class="comment">/*名字*/</span></span><br><span class="line">job <span class="type">VARCHAR</span>(<span class="number">9</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> &quot;&quot;,<span class="comment">/*工作*/</span></span><br><span class="line">mgr MEDIUMINT UNSIGNED ,<span class="comment">/*上级编号*/</span></span><br><span class="line">hiredate <span class="type">DATE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,<span class="comment">/*入职时间*/</span></span><br><span class="line">sal <span class="type">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,<span class="comment">/*薪水*/</span></span><br><span class="line">comm <span class="type">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>) ,<span class="comment">/*红利 奖金*/</span></span><br><span class="line">deptno MEDIUMINT UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="comment">/*部门编号*/</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加测试数据</span></span><br><span class="line"> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7369</span>, <span class="string">&#x27;SMITH&#x27;</span>, <span class="string">&#x27;CLERK&#x27;</span>, <span class="number">7902</span>, <span class="string">&#x27;1990-12-17&#x27;</span>, <span class="number">800.00</span>,<span class="keyword">NULL</span> , <span class="number">20</span>), </span><br><span class="line">(<span class="number">7499</span>, <span class="string">&#x27;ALLEN&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>, <span class="number">7698</span>, <span class="string">&#x27;1991-2-20&#x27;</span>, <span class="number">1600.00</span>, <span class="number">300.00</span>, <span class="number">30</span>),  </span><br><span class="line">(<span class="number">7521</span>, <span class="string">&#x27;WARD&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>, <span class="number">7698</span>, <span class="string">&#x27;1991-2-22&#x27;</span>, <span class="number">1250.00</span>, <span class="number">500.00</span>, <span class="number">30</span>),  </span><br><span class="line">(<span class="number">7566</span>, <span class="string">&#x27;JONES&#x27;</span>, <span class="string">&#x27;MANAGER&#x27;</span>, <span class="number">7839</span>, <span class="string">&#x27;1991-4-2&#x27;</span>, <span class="number">2975.00</span>,<span class="keyword">NULL</span>,<span class="number">20</span>),  </span><br><span class="line">(<span class="number">7654</span>, <span class="string">&#x27;MARTIN&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>, <span class="number">7698</span>, <span class="string">&#x27;1991-9-28&#x27;</span>,<span class="number">1250.00</span>,<span class="number">1400.00</span>,<span class="number">30</span>),  </span><br><span class="line">(<span class="number">7698</span>, <span class="string">&#x27;BLAKE&#x27;</span>,<span class="string">&#x27;MANAGER&#x27;</span>, <span class="number">7839</span>,<span class="string">&#x27;1991-5-1&#x27;</span>, <span class="number">2850.00</span>,<span class="keyword">NULL</span>,<span class="number">30</span>),  </span><br><span class="line">(<span class="number">7782</span>, <span class="string">&#x27;CLARK&#x27;</span>,<span class="string">&#x27;MANAGER&#x27;</span>, <span class="number">7839</span>, <span class="string">&#x27;1991-6-9&#x27;</span>,<span class="number">2450.00</span>,<span class="keyword">NULL</span>,<span class="number">10</span>),  </span><br><span class="line">(<span class="number">7788</span>, <span class="string">&#x27;SCOTT&#x27;</span>,<span class="string">&#x27;ANALYST&#x27;</span>,<span class="number">7566</span>, <span class="string">&#x27;1997-4-19&#x27;</span>,<span class="number">3000.00</span>,<span class="keyword">NULL</span>,<span class="number">20</span>),  </span><br><span class="line">(<span class="number">7839</span>, <span class="string">&#x27;KING&#x27;</span>,<span class="string">&#x27;PRESIDENT&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1991-11-17&#x27;</span>,<span class="number">5000.00</span>,<span class="keyword">NULL</span>,<span class="number">10</span>),  </span><br><span class="line">(<span class="number">7844</span>, <span class="string">&#x27;TURNER&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>,<span class="number">7698</span>, <span class="string">&#x27;1991-9-8&#x27;</span>, <span class="number">1500.00</span>, <span class="keyword">NULL</span>,<span class="number">30</span>),  </span><br><span class="line">(<span class="number">7900</span>, <span class="string">&#x27;JAMES&#x27;</span>,<span class="string">&#x27;CLERK&#x27;</span>,<span class="number">7698</span>, <span class="string">&#x27;1991-12-3&#x27;</span>,<span class="number">950.00</span>,<span class="keyword">NULL</span>,<span class="number">30</span>),  </span><br><span class="line">(<span class="number">7902</span>, <span class="string">&#x27;FORD&#x27;</span>, <span class="string">&#x27;ANALYST&#x27;</span>,<span class="number">7566</span>,<span class="string">&#x27;1991-12-3&#x27;</span>,<span class="number">3000.00</span>, <span class="keyword">NULL</span>,<span class="number">20</span>),  </span><br><span class="line">(<span class="number">7934</span>,<span class="string">&#x27;MILLER&#x27;</span>,<span class="string">&#x27;CLERK&#x27;</span>,<span class="number">7782</span>,<span class="string">&#x27;1992-1-23&#x27;</span>, <span class="number">1300.00</span>, <span class="keyword">NULL</span>,<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 工资级别</span></span><br><span class="line">#工资级别表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> salgrade</span><br><span class="line">(</span><br><span class="line">grade MEDIUMINT UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>, <span class="comment">/*工资级别*/</span> </span><br><span class="line">losal <span class="type">DECIMAL</span>(<span class="number">17</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>, <span class="comment">/* 该级别的最低工资 */</span></span><br><span class="line">hisal <span class="type">DECIMAL</span>(<span class="number">17</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="comment">/* 该级别的最高工资*/</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="number">700</span>,<span class="number">1200</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="number">1201</span>,<span class="number">1400</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">3</span>,<span class="number">1401</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">4</span>,<span class="number">2001</span>,<span class="number">3000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">5</span>,<span class="number">3001</span>,<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> salgrade;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dept;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 如何显示每个部门的平均工资和最高工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(sal), <span class="built_in">MAX</span>(sal), deptno <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno</span><br><span class="line"><span class="comment">-- 显示每个部门的每种岗位的平均工资和最低工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(sal), <span class="built_in">MIN</span>(sal),deptno,job <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno,job</span><br><span class="line">CLERK <span class="number">3</span> SALESMAN <span class="number">1</span> MANAGER <span class="number">3</span>  ANALYST <span class="number">1</span> PRESIDENT <span class="number">1</span> </span><br><span class="line"><span class="comment">-- 显示平均工资低于2000的部门号和它的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(sal) avg_sal <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno <span class="keyword">HAVING</span>  avg_sal <span class="operator">&lt;</span> <span class="number">2000</span></span><br></pre></td></tr></table></figure>

<h2 id="5、函数"><a href="#5、函数" class="headerlink" title="5、函数"></a>5、函数</h2><h3 id="5-1、字符串函数"><a href="#5-1、字符串函数" class="headerlink" title="5.1、字符串函数"></a>5.1、字符串函数</h3><table>
<thead>
<tr>
<th>CHARSET(str)</th>
<th>返回字符串字符集</th>
</tr>
</thead>
<tbody><tr>
<td>CONCAT(string2 [,…])</td>
<td>连接字符串</td>
</tr>
<tr>
<td>INSERT (string,substring)</td>
<td>返回substring在string中出现的位置,没有返回0</td>
</tr>
<tr>
<td>UCASE(string2)</td>
<td>转换成大写</td>
</tr>
<tr>
<td>LCASE(string2)</td>
<td>转换成小写</td>
</tr>
<tr>
<td>LEFT(string2,length)</td>
<td>从string2中的左边起取length个字符</td>
</tr>
<tr>
<td>LENGTH(string)</td>
<td>string长度[按照字节]</td>
</tr>
<tr>
<td>REPLACE(str,search_sr,replace_str)</td>
<td>在str中用replace_str替换search_str</td>
</tr>
<tr>
<td>STRCMP(string1,string2)</td>
<td>逐字符比较两字符串大小</td>
</tr>
<tr>
<td>SUBSTRING(str,position [,length])</td>
<td>从str的position开始[从1开始计算],取length个字符</td>
</tr>
<tr>
<td>LTRIM(string2) RTRIM(string2) trim</td>
<td>去除前端空格或后端空格</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp</span><br><span class="line"><span class="comment">--  CHARSET(str)	返回字串字符集</span></span><br><span class="line"><span class="keyword">SELECT</span> CHARSET(ename) <span class="keyword">FROM</span> emp</span><br><span class="line"></span><br><span class="line"><span class="comment">-- CONCAT (string2  [,... ])	连接字串, 将多个列拼接成一列</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;%&#x27;</span>,ename,<span class="string">&#x27;%&#x27;</span>) <span class="keyword">FROM</span> emp</span><br><span class="line"></span><br><span class="line"><span class="comment">-- INSTR (string ,substring )	返回substring在string中出现的位置,没有返回0</span></span><br><span class="line"><span class="comment">-- dual 亚元表, 系统表 可以作为测试表使用</span></span><br><span class="line"><span class="keyword">SELECT</span> INSTR(<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;d&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- UCASE (string2 )	转换成大写</span></span><br><span class="line"><span class="keyword">SELECT</span> UCASE(<span class="string">&#x27;aBc&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LCASE (string2 )	转换成小写</span></span><br><span class="line"><span class="keyword">SELECT</span> LCASE(<span class="string">&#x27;ABc&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LEFT(string2, string) 从string2中的左边起取length个字符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;abc&#x27;</span>,<span class="number">2</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- RIGHT(string2, string) 从string2中的左边起取length个字符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;abc&#x27;</span>,<span class="number">1</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LENGTH (string )	string长度[按照字节]</span></span><br><span class="line"><span class="keyword">SELECT</span> LENGTH(<span class="string">&#x27;abc&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- REPLACE (str ,search_str ,replace_str ) 	</span></span><br><span class="line"><span class="comment">-- 在str中用replace_str替换search_str</span></span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- STRCMP (string1 ,string2 )	逐字符比较两字串大小</span></span><br><span class="line"><span class="keyword">SELECT</span> STRCMP(<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;Abcd&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- SUBSTRING (str , position  [,length ])	</span></span><br><span class="line"><span class="comment">-- 从str的position开始【从1开始计算】,取length个字符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;abc&#x27;</span>,<span class="number">2</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LTRIM (string2 ) RTRIM (string2 )  TRIM(string)</span></span><br><span class="line"><span class="comment">-- 去除前端空格或后端空格</span></span><br><span class="line"><span class="keyword">SELECT</span> LTRIM(<span class="string">&#x27;  bc&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">SELECT</span> RTRIM(<span class="string">&#x27;  bc    &#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="string">&#x27; abc &#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 以首字母小写的方式显示所有员工emp表的姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(LCASE(<span class="built_in">SUBSTRING</span>(ename,<span class="number">1</span>,<span class="number">1</span>)),<span class="built_in">SUBSTRING</span>(ename,<span class="number">2</span>))  <span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(LCASE(<span class="keyword">LEFT</span>(ename,<span class="number">1</span>)),<span class="built_in">SUBSTRING</span>(ename,<span class="number">2</span>)) <span class="keyword">FROM</span> emp</span><br></pre></td></tr></table></figure>

<h3 id="5-2、数学函数"><a href="#5-2、数学函数" class="headerlink" title="5.2、数学函数"></a>5.2、数学函数</h3><table>
<thead>
<tr>
<th>ABS（num）</th>
<th>绝对值</th>
</tr>
</thead>
<tbody><tr>
<td>BIN(decimal_number)</td>
<td>十进制转二进制</td>
</tr>
<tr>
<td>CEILING(number2)</td>
<td>向上取整,得到比num2大的最小整数</td>
</tr>
<tr>
<td>CONV(number2,form_base,to_base)</td>
<td>进制转换</td>
</tr>
<tr>
<td>FLOOR(number2)</td>
<td>向下取整,得到比num2小的最大整数</td>
</tr>
<tr>
<td>FORMAT(number,decimal_places)</td>
<td>保留小数位数</td>
</tr>
<tr>
<td>HEX(DecimalNumber)</td>
<td>转十进制</td>
</tr>
<tr>
<td>LEAST(number,number2,[…])</td>
<td>求最小值</td>
</tr>
<tr>
<td>MOD(numberator,denominator)</td>
<td>求余</td>
</tr>
<tr>
<td>RAND([seed])</td>
<td>范围为[0,1] rand()返回一个随机浮点值v,范围在0-1之间(即:其范围为[0,1.0])。若已指定一个整数参数N，则它被用作种子值，用来产生重复序列。</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ABS(num)	绝对值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">10</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-5</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- BIN (decimal_number )十进制转二进制</span></span><br><span class="line"><span class="keyword">SELECT</span> BIN(<span class="number">10</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- CEILING (number2 )	向上取整, 得到比num2 大的最小整数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEILING</span>(<span class="number">2.5</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEILING</span>(<span class="number">-1.1</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- CONV(number2,from_base,to_base)	进制转换</span></span><br><span class="line"><span class="comment">-- 下面的含义是 8 是十进制的8, 转成 2进制输出</span></span><br><span class="line"><span class="keyword">SELECT</span> CONV(<span class="number">8</span>,<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- FLOOR (number2 )	向下取整,得到比 num2 小的最大整数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">5.2</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">-2.1</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- FORMAT (number,decimal_places )	保留小数位数(四舍五入)</span></span><br><span class="line"><span class="keyword">SELECT</span> FORMAT(<span class="number">1.351</span>,<span class="number">2</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">SELECT</span> FORMAT(<span class="number">1.355</span>,<span class="number">2</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- HEX (DecimalNumber )	转十六进制</span></span><br><span class="line"><span class="keyword">SELECT</span> HEX(<span class="number">16</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- LEAST (number , number2  [,..])	求最小值</span></span><br><span class="line"><span class="keyword">SELECT</span> LEAST(<span class="number">1</span>,<span class="number">-2</span>,<span class="number">2</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- GREATEST (number , number2  [,..])	求最大值</span></span><br><span class="line"><span class="keyword">SELECT</span> GREATEST(<span class="number">5</span>,<span class="number">-1</span>,<span class="number">10</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- MOD (numerator ,denominator )	求余</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MOD</span>(<span class="number">10</span>,<span class="number">3</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- RAND([seed])	RAND([seed]) 返回随机数 其范围为 0 ≤ v ≤ 1.0</span></span><br><span class="line"><span class="comment">-- 1. 如果使用 rand() 每次返回不同的随机数 ，在 0 ≤ v ≤ 1.0</span></span><br><span class="line"><span class="comment">-- 2. 如果使用 rand(seed) 返回随机数, 范围 0 ≤ v ≤ 1.0, 如果seed不变</span></span><br><span class="line"><span class="keyword">SELECT</span> RAND() <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">SELECT</span> RAND(<span class="number">1</span>)<span class="keyword">FROM</span> DUAL</span><br></pre></td></tr></table></figure>

<h3 id="5-3、日期函数"><a href="#5-3、日期函数" class="headerlink" title="5.3、日期函数"></a>5.3、日期函数</h3><table>
<thead>
<tr>
<th>CURRENT_DATE()</th>
<th>当前日期</th>
</tr>
</thead>
<tbody><tr>
<td>CURRENT_TIME（）</td>
<td>当前时间</td>
</tr>
<tr>
<td>CURRENT_TIMESTAMP（）</td>
<td>当前时间戳</td>
</tr>
<tr>
<td>DATE（datetime）</td>
<td>返回datetime的日期部分</td>
</tr>
<tr>
<td>DATE_ADD(date2,INTERVAL d_value d_type)</td>
<td>在date2中加上日期或时间</td>
</tr>
<tr>
<td>DATE_SUB(date2,INTERVAL d_value d_type)</td>
<td>在date2上减去一个时间</td>
</tr>
<tr>
<td>DATEDIFF(date1,date2)</td>
<td>两个日期差(结果是天)</td>
</tr>
<tr>
<td>TIMEDIFF(date1,date2)</td>
<td>两个时间差(多少小时,多少分钟多少秒)</td>
</tr>
<tr>
<td>NOW()</td>
<td>当前时间</td>
</tr>
<tr>
<td>YEAR|MOTH|DATE(datetime) FROM_UNIXTIME()</td>
<td>年月日</td>
</tr>
</tbody></table>
<blockquote>
<ol>
<li>DATE_ADD()中的interval后面可以是year、minute、second、hour、day</li>
<li>DATE_SUB()中的interval后面可以是year、minute、second、hour、day</li>
<li>DATEDIFF(date1,date2)得到的是天数,而且是date1-date2的天数,因此可以取负数</li>
<li>这四个函数的日期类型可以是date、datetime或者timestamp</li>
<li>unix_timestamp()返回的是1970-01-01到现在的秒数</li>
<li>form_unixtime()可以把一个unix_timestamp秒数[时间戳],转成指定格式的日期</li>
<li>%Y-%m-%d %H:%i:%s 表示年月日时分秒</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- CURRENT_DATE (  )	当前日期</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span> <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- CURRENT_TIME (  )	当前时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIME</span> <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- CURRENT_TIMESTAMP (  ) 当前时间戳</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIMESTAMP</span>() <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> info(</span><br><span class="line">	 id <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">	 zuthor <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">	 create_date datetime</span><br><span class="line">)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> info <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>,now());</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> info <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;2021-11-12 21:22:00&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> info <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;kangkang&#x27;</span>,<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> info</span><br><span class="line"><span class="comment">-- 显示所有新闻信息，发布日期只显示 日期，不用显示时间.</span></span><br><span class="line"><span class="keyword">SELECT</span> id,zuthor,<span class="type">DATE</span>(create_date) <span class="keyword">FROM</span> info</span><br><span class="line"><span class="comment">-- 请查询在10分钟内发布的新闻</span></span><br><span class="line"><span class="keyword">SELECT</span> id,zuthor,create_date <span class="keyword">FROM</span> info <span class="keyword">WHERE</span> DATE_ADD(create_date,<span class="type">INTERVAL</span> <span class="number">10</span> <span class="keyword">MINUTE</span>) <span class="operator">&gt;=</span> now()</span><br><span class="line"><span class="keyword">SELECT</span> id,zuthor,create_date <span class="keyword">FROM</span> info <span class="keyword">WHERE</span> create_date <span class="operator">&gt;=</span> DATE_SUB( NOW(),<span class="type">INTERVAL</span> <span class="number">10</span> <span class="keyword">MINUTE</span>) </span><br><span class="line"><span class="comment">-- 请在mysql 的sql语句中求出 2011-11-11 和 1990-1-1 相差多少天</span></span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(<span class="string">&#x27;2011-11-11&#x27;</span>,<span class="string">&#x27;1990-01-01&#x27;</span>)</span><br><span class="line"><span class="comment">-- 请用mysql 的sql语句求出你活了多少天?  1986-11-11 出生</span></span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(<span class="string">&#x27;2021-11-02&#x27;</span>,<span class="string">&#x27;1986-11-11&#x27;</span>)</span><br><span class="line"><span class="comment">-- 如果你能活80岁，求出你还能活多少天. 1986-11-11 出生</span></span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(DATE_ADD(<span class="string">&#x27;1986-11-11&#x27;</span>,<span class="type">INTERVAL</span> <span class="number">80</span> <span class="keyword">YEAR</span>),<span class="string">&#x27;2021-11-02&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"></span><br><span class="line"><span class="comment">-- TIMEDIFF(date1,date2)返回两个时间相差多少小时多少分钟多少秒</span></span><br><span class="line"><span class="keyword">SELECT</span> TIMEDIFF(<span class="string">&#x27;21:47:30&#x27;</span>,<span class="string">&#x27;23:20:59&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">SELECT</span> TIMEDIFF(<span class="string">&#x27;2021-11-02 21:47:30&#x27;</span>,<span class="string">&#x27;2021-11-03 23:20:59&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- unix_timestamp() : 返回的是1970-1-1 到现在的秒数</span></span><br><span class="line"><span class="keyword">SELECT</span> UNIX_TIMESTAMP()</span><br><span class="line"><span class="comment">-- FROM_UNIXTIME() : 可以把一个unix_timestamp 秒数[时间戳]，转成指定格式的日期</span></span><br><span class="line"><span class="keyword">SELECT</span> FROM_UNIXTIME(<span class="number">1635860966</span>,<span class="string">&#x27;%Y:%m:%d %H:%i:%s&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br></pre></td></tr></table></figure>

<h3 id="5-4、加密函数系统函数"><a href="#5-4、加密函数系统函数" class="headerlink" title="5.4、加密函数系统函数"></a>5.4、加密函数系统函数</h3><table>
<thead>
<tr>
<th>USER()</th>
<th>查询用户</th>
</tr>
</thead>
<tbody><tr>
<td>DATABASE()</td>
<td>数据库名称</td>
</tr>
<tr>
<td>MD5(str)</td>
<td>为字符串算出一个MD5 32的字符串</td>
</tr>
<tr>
<td>PASSWORD(str)</td>
<td>从原文密码str计算返回密码字符串,通常用于对mysql数据库的用户密码加密</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- USER()	查询用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>() <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- DATABASE()	查询当前使用数据库名称</span></span><br><span class="line"><span class="keyword">SELECT</span> DATABASE() <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- MD5(str)	为字符串算出一个 MD5 32的字符串，常用(用户密码)加密</span></span><br><span class="line"><span class="keyword">SELECT</span> MD5(<span class="number">1</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">SELECT</span> LENGTH(<span class="string">&#x27;c4ca4238a0b923820dcc509a6f75849b&#x27;</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- PASSWORD(str) -- 加密函数, MySQL数据库的用户密码就是 PASSWORD函数加密</span></span><br><span class="line"><span class="keyword">SELECT</span> PASSWORD(<span class="number">1</span>) <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="comment">-- 查看系统用户表</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mysql.user</span><br></pre></td></tr></table></figure>

<h3 id="5-5、流程控制函数"><a href="#5-5、流程控制函数" class="headerlink" title="5.5、流程控制函数"></a>5.5、流程控制函数</h3><table>
<thead>
<tr>
<th>IF(expr1,expr2,expr3)</th>
<th>如果expr1为true,则返回expr2否则返回expr3</th>
</tr>
</thead>
<tbody><tr>
<td>IFNULL(expr1,expr2)</td>
<td>如果expr1不为空NULL,则返回expr1,否则返回expr2</td>
</tr>
<tr>
<td>SELECT CASE WHEN expr1 THEN expr2 WHEN expr3 THEN expr4 ELSE expr5 END</td>
<td>如果expr1为true,则返回expr2,如果expr2为true返回expr4,否则返回expr5</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- IF(expr1,expr2,expr3)	如果expr1为True ,则返回 expr2 否则返回 expr3</span></span><br><span class="line"><span class="keyword">SELECT</span> IF(<span class="literal">TRUE</span>,<span class="string">&#x27;真&#x27;</span>,<span class="string">&#x27;假&#x27;</span>)</span><br><span class="line"><span class="comment">-- IFNULL(expr1,expr2)	如果expr1不为空NULL,则返回expr1,否则返回expr2</span></span><br><span class="line"><span class="keyword">SELECT</span> IFNULL(<span class="keyword">NULL</span>,<span class="string">&#x27;空&#x27;</span>)</span><br><span class="line"><span class="comment">-- SELECT CASE WHEN expr1 THEN expr2 WHEN expr3 THEN expr4 ELSE expr5 END; [类似多重分支.] 如果expr1 为TRUE,则返回expr2,如果expr2 为t, 返回 expr4, 否则返回 expr5</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> </span><br><span class="line">	<span class="keyword">WHEN</span> <span class="literal">TRUE</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;真&#x27;</span></span><br><span class="line">	<span class="keyword">ELSE</span></span><br><span class="line">		<span class="string">&#x27;假&#x27;</span></span><br><span class="line"><span class="keyword">END</span> ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> emp</span><br><span class="line"><span class="comment">-- 查询emp 表, 如果 comm 是null , 则显示0.0</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,IF( comm <span class="keyword">IS</span> <span class="keyword">NULL</span>,<span class="number">0.0</span>,comm) <span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">SELECT</span> ename, IFNULL( comm,<span class="string">&#x27;0.0&#x27;</span>) <span class="keyword">FROM</span> emp</span><br><span class="line"><span class="comment">-- 2. 如果emp 表的 job 是 CLERK 则显示 职员， 如果是 MANAGER 则显示经理 如果是 SALESMAN 则显示 销售人员，其它正常显示</span></span><br><span class="line"><span class="keyword">SELECT</span> job,ename,(<span class="keyword">CASE</span> </span><br><span class="line">	<span class="keyword">WHEN</span> job <span class="operator">=</span> <span class="string">&#x27;CLERK&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;职员&#x27;</span></span><br><span class="line">	<span class="keyword">WHEN</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">	  <span class="string">&#x27;经理&#x27;</span></span><br><span class="line">	<span class="keyword">WHEN</span> job <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">		 <span class="string">&#x27;销售人员&#x27;</span></span><br><span class="line">	<span class="keyword">ELSE</span></span><br><span class="line">		job</span><br><span class="line"><span class="keyword">END</span>)  <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="keyword">SELECT</span> job,ename,IF(job <span class="operator">=</span> <span class="string">&#x27;CLERK&#x27;</span>,<span class="string">&#x27;职员&#x27;</span>,IF(job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span>,<span class="string">&#x27;经理&#x27;</span>,IF(job <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span>,<span class="string">&#x27;销售人员&#x27;</span>,job))) <span class="keyword">FROM</span> emp</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="6、查询增强"><a href="#6、查询增强" class="headerlink" title="6、查询增强"></a>6、查询增强</h2><h3 id="6-1、模糊查询、排序"><a href="#6-1、模糊查询、排序" class="headerlink" title="6.1、模糊查询、排序"></a>6.1、模糊查询、排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dept;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> salgrade;</span><br><span class="line"><span class="comment">-- 使用where子句 查找1992.1.1后入职的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> hiredate <span class="operator">&gt;</span> <span class="string">&#x27;1992-01-01&#x27;</span>;</span><br><span class="line"><span class="comment">-- 使用like操作符(模糊)</span></span><br><span class="line"><span class="comment">-- 	%: 表示0到多个任意字符 _: 表示单个任意字符</span></span><br><span class="line"><span class="comment">-- 	显示首字符为S的员工姓名和工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="keyword">like</span> <span class="string">&#x27;S%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 	显示第三个字符为大写O的所有员工的姓名和工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="keyword">LIKE</span> <span class="string">&#x27;__O%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 显示没有上级的雇员的情况</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> mgr <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="comment">-- 查询表结构 </span></span><br><span class="line"><span class="keyword">DESC</span> emp;</span><br><span class="line"><span class="comment">-- 使用order by子句</span></span><br><span class="line"><span class="comment">-- 如何按照工资的从低到高的顺序[升序]，显示雇员的信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> sal;</span><br><span class="line"><span class="comment">-- 按照部门号升序而雇员的工资降序排列 , 显示雇员信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> deptno,sal <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<h3 id="6-2、分页查询"><a href="#6-2、分页查询" class="headerlink" title="6.2、分页查询"></a>6.2、分页查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">基本语法:<span class="keyword">SELECT</span> ... limit <span class="keyword">start</span> <span class="keyword">rows</span>	表示从<span class="keyword">start</span><span class="operator">+</span><span class="number">1</span>行开始取,取出<span class="keyword">rows</span>行,<span class="keyword">start</span>从<span class="number">0</span>开始计算</span><br><span class="line"></span><br><span class="line">公式:<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp</span><br><span class="line">			<span class="keyword">ORDER</span> <span class="keyword">BY</span> empno</span><br><span class="line">			LIMIT 每页显示记录数 <span class="operator">*</span> (第几页<span class="number">-1</span>), 每页显示记录数</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 按雇员的id号升序取出第二页， 每页显示3条记录</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> empno LIMIT <span class="number">3</span>,<span class="number">3</span>;</span><br><span class="line"><span class="comment">-- 显示每种每种岗位的雇员数量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>),job <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> job;</span><br><span class="line"><span class="comment">-- 显示雇员总数，以及获得补助的雇员数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>),<span class="built_in">count</span>(comm) <span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示每种岗位的雇员总数、平均工资。</span></span><br><span class="line"><span class="keyword">SELECT</span> job,<span class="built_in">count</span>(<span class="operator">*</span>),<span class="built_in">avg</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> job;</span><br><span class="line"><span class="comment">-- 显示雇员总数，以及获得补助的雇员数。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>),<span class="built_in">COUNT</span>(comm) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">-- 统计没有获得补助的雇员数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(IF(comm <span class="keyword">IS</span> <span class="keyword">NULL</span>,<span class="string">&#x27;1&#x27;</span>, <span class="keyword">NULL</span>)) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">-</span> <span class="built_in">COUNT</span>(comm) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">-- 显示管理者的总人数</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> mgr) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">-- 显示雇员工资的最大差额。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(sal) <span class="operator">-</span> <span class="built_in">MIN</span>(sal <span class="keyword">FROM</span> emp;					</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">查询条件使用顺序: <span class="keyword">SELECT</span> column1, column2, column3.. <span class="keyword">FROM</span>  <span class="keyword">table</span></span><br><span class="line">						<span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">column</span></span><br><span class="line">						<span class="keyword">having</span> <span class="keyword">condition</span></span><br><span class="line">						<span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">column</span></span><br><span class="line">						limit <span class="keyword">start</span>,roes;</span><br><span class="line"><span class="comment">-- 请统计各个部门的平均工资并且是大于1000的，并且按照平均工资从高到低排序， 取出前两行记录 </span></span><br><span class="line"><span class="keyword">SELECT</span> job,<span class="built_in">AVG</span>(sal) avg_sal <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span>	deptno <span class="keyword">HAVING</span> avg_sal <span class="operator">&gt;</span> <span class="number">1000</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> avg_sal <span class="keyword">DESC</span> LIMIT <span class="number">0</span> ,<span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h2 id="7、多表查询"><a href="#7、多表查询" class="headerlink" title="7、多表查询"></a>7、多表查询</h2><h3 id="7-1、笛卡尔集"><a href="#7-1、笛卡尔集" class="headerlink" title="7.1、笛卡尔集"></a>7.1、笛卡尔集</h3><p>​        多表是查询是指基于两个和两个以上的表查询，在实际应用中，查询单个表可能不满足你的需求</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示雇员名,雇员工资及所在部门的名字 【笛卡尔集】</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,sal,dname <span class="keyword">FROM</span> emp , dept <span class="keyword">WHERE</span> emp.deptno <span class="operator">=</span> dept.deptno</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在默认情况下:当两个表查询时,规则</p>
<ol>
<li>从第一张表中,取出一行和第二张表的每一行进行组合,返回结果[含有两张表的所有列]</li>
<li>一共返回的记录数第一张表行数* 第二张表的行数</li>
<li>这样多表查询默认处理返回的结果,称为笛卡尔集</li>
<li>解决这个多表的关键就是要写出正确的过滤条件where</li>
<li>多表查询的条件不能少于表的个数-1,否则会出现笛卡尔集</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示部门号为10的部门名、员工名和工资 </span></span><br><span class="line"><span class="keyword">SELECT</span> dname , ename, sal,dept.deptno <span class="keyword">FROM</span> emp, dept <span class="keyword">WHERE</span> dept.deptno <span class="operator">=</span> emp.deptno <span class="keyword">AND</span> dept.deptno <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">-- 显示各个员工的姓名，工资，及其工资的级别</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> salgrade;</span><br><span class="line"><span class="keyword">SELECT</span> ename, sal, grade <span class="keyword">FROM</span> emp,salgrade <span class="keyword">WHERE</span> sal <span class="keyword">BETWEEN</span> losal <span class="keyword">AND</span> hisal;</span><br><span class="line"><span class="keyword">SELECT</span> ename, sal, grade <span class="keyword">FROM</span> emp,salgrade <span class="keyword">WHERE</span> sal <span class="operator">&gt;=</span> losal <span class="keyword">AND</span> sal <span class="operator">&lt;=</span> hisal;</span><br><span class="line"><span class="comment">-- 显示雇员名,雇员工资及所在部门的名字,并按部门降序排列</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,sal,dname,dept.deptno <span class="keyword">FROM</span> emp, dept <span class="keyword">WHERE</span> emp.deptno <span class="operator">=</span> dept.deptno <span class="keyword">ORDER</span> <span class="keyword">BY</span> dept.deptno <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<h3 id="7-2、自连接"><a href="#7-2、自连接" class="headerlink" title="7.2、自连接"></a>7.2、自连接</h3><p>​    自连接是指在同一张表的连接查询【将同一张表看做两张表】</p>
<p>​    自连接的特点：</p>
<ul>
<li>把同一张表当做两张表使用</li>
<li>需要给表取别名 表名  表别名</li>
<li>列名不明确，可以指定列的别名  列名 as 列的别名</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示公司员工名字和他的上级的名字</span></span><br><span class="line"><span class="keyword">SELECT</span> emp1.ename, emp2.ename <span class="keyword">FROM</span> emp emp1, emp emp2 <span class="keyword">WHERE</span> emp1.mgr <span class="operator">=</span> emp2.empno;</span><br></pre></td></tr></table></figure>

<h3 id="7-3、子查询"><a href="#7-3、子查询" class="headerlink" title="7.3、子查询"></a>7.3、子查询</h3><p>​    子查询是指嵌入在其他sql语句中的select语句,也叫嵌套查询。子查询分为单行子查询，单行子查询查询是指只返回一行数据的子查询语句；多行子查询，多行子查询是指返回多行数据的字查询 使用关键字in。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示与SMITH同一部门的所有员工</span></span><br><span class="line"><span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno <span class="operator">=</span> (<span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询和部门10的工作相同的雇员的</span></span><br><span class="line"><span class="comment">-- 名字、岗位、工资、部门号, 但是不含10号部门自己的雇员.</span></span><br><span class="line"><span class="keyword">SELECT</span> job <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">SELECT</span> ename,job,sal,deptno <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> job <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> job <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno <span class="operator">=</span> <span class="number">10</span>) <span class="keyword">AND</span> deptno <span class="operator">!=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p><strong>子查询临时表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 求每个部门中员工工资最高的员工</span></span><br><span class="line"><span class="comment">-- 求出每个部门的最高工资和部门编号,当做临时表 判断条件部门id相同、当前工资与最高工资相同</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(sal),deptno <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> emp.ename,temp.deptno,emp.sal <span class="keyword">FROM</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(sal) max_sal ,deptno <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno</span><br><span class="line">) temp , emp</span><br><span class="line">	<span class="keyword">WHERE</span> temp.deptno <span class="operator">=</span> emp.deptno <span class="keyword">AND</span> temp.max_sal <span class="operator">=</span> emp.sal;</span><br></pre></td></tr></table></figure>

<p><strong>ALL\ANY</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示工资比部门30的所有员工的工资高的员工的姓名、工资和部门号</span></span><br><span class="line"><span class="keyword">SELECT</span> sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	ename,</span><br><span class="line">	sal,</span><br><span class="line">	deptno </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	emp </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sal <span class="operator">&gt;</span> <span class="keyword">ALL</span> ( <span class="keyword">SELECT</span> sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno <span class="operator">=</span> <span class="number">30</span> );</span><br><span class="line">	</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	ename,</span><br><span class="line">	sal,</span><br><span class="line">	deptno </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	emp </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sal <span class="operator">&gt;</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		<span class="built_in">MAX</span>( sal ) </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		emp </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">	deptno <span class="operator">=</span> <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示工资比部门30的其中一个员工的工资高的员工的姓名、工资和部门号</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	ename,</span><br><span class="line">	sal,</span><br><span class="line">	deptno </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	emp </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sal <span class="operator">&gt;</span> <span class="keyword">ANY</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		sal </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		emp </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	deptno <span class="operator">=</span> <span class="number">30</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">	ename,</span><br><span class="line">	sal,</span><br><span class="line">	deptno </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	emp </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sal <span class="operator">&gt;</span>  (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		<span class="built_in">min</span>(sal) </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		emp </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	deptno <span class="operator">=</span> <span class="number">30</span>);</span><br></pre></td></tr></table></figure>

<p><strong>多列子查询</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询与allen的部门和岗位完全相同的所有雇员(并且不含allen本人)</span></span><br><span class="line"><span class="comment">-- (字段1， 字段2 ...) = (select 字段 1，字段2 from 。。。。)</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> (deptno,job) <span class="operator">=</span> (	<span class="keyword">SELECT</span> deptno,job <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="operator">=</span> <span class="string">&#x27;allen&#x27;</span>) <span class="keyword">AND</span> ename <span class="operator">!=</span> <span class="string">&#x27;allen&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">-- 查找每个部门工资高于本部门平均工资的人的资料</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(sal),deptno <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno;</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (</span><br><span class="line">		<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(sal) avg_sal,deptno <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno</span><br><span class="line">	)temp ,emp <span class="keyword">WHERE</span> temp.deptno <span class="operator">=</span> emp.deptno <span class="keyword">AND</span> emp.sal <span class="operator">&gt;</span> temp.avg_sal;</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 查找每个部门工资最高的人的详细资料</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,sal,emp.deptno <span class="keyword">FROM</span> emp ,(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(sal) max_sal,deptno <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno</span><br><span class="line">) temp <span class="keyword">WHERE</span> emp.deptno <span class="operator">=</span> temp.deptno <span class="keyword">AND</span> emp.sal <span class="operator">=</span> temp.max_sal;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询每个部门的信息(包括:部门名,编号,地址)和人员数量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(emp.deptno), dname,emp.empno,emp.deptno <span class="keyword">FROM</span> emp , dept <span class="keyword">WHERE</span> emp.deptno <span class="operator">=</span> dept.deptno <span class="keyword">GROUP</span> <span class="keyword">BY</span> emp.deptno</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="7-4、表复制和去重"><a href="#7-4、表复制和去重" class="headerlink" title="7.4、表复制和去重"></a>7.4、表复制和去重</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 把一张表查询出的数据添加到另一张表中</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t11(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">	`create_date` datetime</span><br><span class="line">)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t11 (id,`name`,create_date) <span class="keyword">SELECT</span> empno,ename,hiredate <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t11;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 表复制</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t11 <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t11;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> t11;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t11;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 复制表的结构</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t12 <span class="keyword">LIKE</span> emp;</span><br><span class="line"><span class="keyword">DESC</span> t12;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t12 <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t12;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 表的去重,对t12进行去重</span></span><br><span class="line"><span class="comment">-- 1.创建一张临时表,表的结构和t12一样</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t13 <span class="keyword">like</span> t12;</span><br><span class="line"><span class="keyword">DESC</span> t13;</span><br><span class="line"><span class="comment">-- 2.查询t12去重之后的数据,赋值给t13</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t13 <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t12;</span><br><span class="line"><span class="comment">-- 3.删除t12表的数据</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t12;</span><br><span class="line"><span class="comment">-- 4.将t13表的数据插入到t12</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t12 <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t13;</span><br><span class="line"><span class="comment">-- 5.删除t13</span></span><br><span class="line"><span class="keyword">DROP</span>  <span class="keyword">TABLE</span> t13;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t12;</span><br></pre></td></tr></table></figure>

<h3 id="7-5、合并查询"><a href="#7-5、合并查询" class="headerlink" title="7.5、合并查询"></a>7.5、合并查询</h3><ul>
<li><p>union all 该操作符用于取得两个结果集的并集，当使用该操作符时，不会取消重复行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal <span class="operator">&gt;</span> <span class="number">2500</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno <span class="operator">=</span> <span class="string">&#x27;20&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li><p>union 该操作符与union all相似,但是会自动去掉结果集中重复的行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal <span class="operator">&gt;</span> <span class="number">2500</span></span><br><span class="line"><span class="keyword">UNION</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno <span class="operator">=</span> <span class="string">&#x27;20&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>union all 和 union进行合并时sql语句查询出列的数量必须保持一致</p>
<h3 id="7-6、外连接"><a href="#7-6、外连接" class="headerlink" title="7.6、外连接"></a>7.6、外连接</h3><p>​    前面我们学习的查询，是利用where子句对两张表或者多张表，形成的笛卡尔积进行筛选，根据关联条件，显示所有匹配的记录，匹配不上的，不显示。</p>
<p>比如：查询出部门名称和这些部门的员工名称和工作，同时要求显示出那些没有员工的部门</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ename,job,dname <span class="keyword">FROM</span> emp,dept <span class="keyword">WHERE</span> emp.deptno <span class="operator">=</span>  dept.deptno;</span><br></pre></td></tr></table></figure>

<p>此时产生的问题就是没有员工的部门不能进行显示;此时就需要采用外连接来进行查询</p>
<ul>
<li>左外连接:如果左侧的表完全显示我们就说是左外连接</li>
<li>右外连接:如果右侧的表完全显示我们就说是右外连接</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stu(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stu <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> stu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> score(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	`score` <span class="type">INT</span>(<span class="number">11</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> score <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="number">20</span>),(<span class="number">2</span>,<span class="number">30</span>),(<span class="number">5</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> score;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用左连接</span></span><br><span class="line"><span class="comment">-- （显示所有人的成绩，如果没有成绩，也要显示该人的姓名和id号,成绩显示为空）</span></span><br><span class="line"><span class="keyword">SELECT</span> `name`,stu.id,score <span class="keyword">FROM</span> stu <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score <span class="keyword">ON</span> stu.id <span class="operator">=</span> score.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用右外连接（显示所有成绩，如果没有名字匹配，显示空)</span></span><br><span class="line"><span class="comment">-- 即：右边的表 和左表没有匹配的记录，也会把右表的记录显示出来</span></span><br><span class="line"><span class="keyword">SELECT</span> `name`,stu.id,score <span class="keyword">FROM</span> stu <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> score <span class="keyword">ON</span> stu.id <span class="operator">=</span> score.id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列出部门名称和这些部门的员工信息(名字和工作)，</span></span><br><span class="line"><span class="comment">-- 同时列出那些没有员工的部门名。</span></span><br><span class="line"><span class="comment">-- 使用左外连接实现</span></span><br><span class="line"><span class="keyword">SELECT</span> dname,ename,job <span class="keyword">FROM</span> dept <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> emp <span class="keyword">ON</span> dept.deptno <span class="operator">=</span> emp.deptno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用右外连接实现</span></span><br><span class="line"><span class="keyword">SELECT</span> dname,ename,job <span class="keyword">FROM</span> emp <span class="keyword">RIGHT</span>  <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> dept.deptno <span class="operator">=</span> emp.deptno;</span><br></pre></td></tr></table></figure>

<h2 id="8、MySQL约束"><a href="#8、MySQL约束" class="headerlink" title="8、MySQL约束"></a>8、MySQL约束</h2><h3 id="8-1、主键"><a href="#8-1、主键" class="headerlink" title="8.1、主键"></a>8.1、主键</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 主键列的值是不可以重复</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t13(</span><br><span class="line">	`id` <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	`email` <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t13 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t13 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t13;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t13 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);<span class="comment">--Duplicate entry &#x27;1&#x27; for key&#x27;PRIMARY&#x27;</span></span><br><span class="line"><span class="keyword">UPDATE</span> t13 <span class="keyword">SET</span> id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>; <span class="comment">--  Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- primary key不能重复而且不能为 null。</span></span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> t13 <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;87975531@qq.com&#x27;</span>); <span class="comment">--Column &#x27;id&#x27; cannot be null</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">DESC</span> t13;</span><br><span class="line">	<span class="comment">-- 一张表最多只能有一个主键, 但可以是复合主键(比如 id+name)</span></span><br><span class="line">	<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t14(</span><br><span class="line">	`id` <span class="type">INT</span> ,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	`email` <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY(id,`name`)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t14;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t14 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t14 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t14 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t14 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t14 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>); <span class="comment">-- Duplicate entry &#x27;2-tom&#x27; for key &#x27;PRIMARY&#x27;</span></span><br><span class="line"><span class="comment">-- 声明主键的两种方式</span></span><br><span class="line"><span class="comment">-- 直接在字段后声明</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t15(</span><br><span class="line">	`id` <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	`email` <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在所有字段声明完毕的末尾</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t16(</span><br><span class="line">	`id` <span class="type">INT</span> ,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	`email` <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY(id)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="8-2、not-null"><a href="#8-2、not-null" class="headerlink" title="8.2、not null"></a>8.2、not null</h3><p>​    如果在列上定义了not null，那么当插入数据时，必须为列提供数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t17(</span><br><span class="line">	`id` <span class="type">INT</span> ,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	`email` <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY(id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t17 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t17 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>); <span class="comment">-- Column &#x27;name&#x27; cannot be null</span></span><br></pre></td></tr></table></figure>

<h3 id="8-3、unique"><a href="#8-3、unique" class="headerlink" title="8.3、unique"></a>8.3、unique</h3><p>​    当定义了唯一约束之后,该列值是不能重复的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 设置为unique但不设置为not null 允许插入空值且多个</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t18(</span><br><span class="line">	`id` <span class="type">INT</span> <span class="keyword">UNIQUE</span> ,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>) ,</span><br><span class="line">	`email` <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t18 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t18 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>); <span class="comment">-- Duplicate entry &#x27;2&#x27; for key &#x27;PRIMARY&#x27;</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t18 <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t18 <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>); </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> t18;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置为unique设置为not null 不允许插入空值</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t19(</span><br><span class="line">	`id` <span class="type">INT</span> <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> ,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>) ,</span><br><span class="line">	`email` <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t19 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t19 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>); <span class="comment">-- Duplicate entry &#x27;2&#x27; for key &#x27;id&#x27;</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t19 <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;123456@qq.com&#x27;</span>); <span class="comment">--  Column &#x27;id&#x27; cannot be null</span></span><br></pre></td></tr></table></figure>

<h3 id="8-4、外键"><a href="#8-4、外键" class="headerlink" title="8.4、外键"></a>8.4、外键</h3><p>​        用于定义主表和从表之间的关系：外键约束要定义在从表上，主表则必须是具有主键约束或者是unique约束，当定义外键约束后，要求外键列数据必须在主表的主键列存在或是为null</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法: <span class="keyword">FOREIGN</span> KEY(本表字段名) <span class="keyword">REFERENCES</span> 主表名(主键名或<span class="keyword">unique</span>字段名)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建主表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t20(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t20 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;java&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t20;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t21(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	`class_id` <span class="type">INT</span>,</span><br><span class="line">	<span class="comment">-- 外键</span></span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY(class_id) <span class="keyword">REFERENCES</span> t20(id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">DESC</span> t21;</span><br><span class="line"><span class="comment">-- 关键的外键不存在数据不允许被插入</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t21 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t21 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;mary&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t21 <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="number">3</span>); <span class="comment">-- Cannot add or update a child row: a foreign key constraint fails (`db01`.`t21`, CONSTRAINT `t21_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `t20` (`id`))</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t21;</span><br><span class="line"><span class="comment">-- 是否允许插入为NULL取决于设置外键的字段是否非空</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t21 <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除主表的数据.必须在从表中没有被引用才可以删除</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t20 <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>; <span class="comment">-- Cannot delete or update a parent row: a foreign key constraint fails (`db01`.`t21`, CONSTRAINT `t21_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `t20` (`id`))</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>外键指向的表的字段,要求是primary key或者是unique</li>
<li>表的类型是innodb,这样的表才支持外键</li>
<li>外键字段的类型要和主键字段的类型一致(长度可以不同)</li>
<li>外键字段的值,必须在主键字段中出现过,或者为NULL[前提是外键字段允许为null]</li>
<li>一旦建立外键关系,数据不能随意删除了</li>
</ol>
</blockquote>
<h3 id="8-5、check"><a href="#8-5、check" class="headerlink" title="8.5、check"></a>8.5、check</h3><p>​    用于强制行数据必须满足的条件。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- check约束目前在mysql5.7中暂不支持,但是可以书写</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t22 (</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	`sex` <span class="type">VARCHAR</span> ( <span class="number">20</span> ) <span class="keyword">CHECK</span> (</span><br><span class="line">	sex <span class="keyword">IN</span> ( <span class="string">&#x27;man&#x27;</span>, <span class="string">&#x27;woman&#x27;</span> )),</span><br><span class="line">`sal` <span class="keyword">DOUBLE</span> <span class="keyword">CHECK</span> ( sal <span class="operator">&gt;=</span> <span class="number">1000</span> <span class="keyword">AND</span> sal <span class="operator">&lt;=</span> <span class="number">3000</span> ))</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t22 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;mid&#x27;</span>,<span class="number">11</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t22;</span><br></pre></td></tr></table></figure>

<p><strong>建表练习</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE shop_db;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 现有一个商店的数据库shop_db，记录客户及其购物情况，由下面三个表组成：</span></span><br><span class="line"><span class="comment">-- 商品goods（商品号goods_id，商品名goods_name，单价unitprice，商品类别category，</span></span><br><span class="line"><span class="comment">-- 供应商provider);</span></span><br><span class="line"><span class="comment">-- 客户customer（客户号customer_id,姓名name,住址address,电邮email性别sex,身份证card_Id);</span></span><br><span class="line"><span class="comment">-- 购买purchase（购买订单号order_id，客户号customer_id,商品号goods_id,购买数量nums);</span></span><br><span class="line"><span class="comment">-- 1 建表，在定义中要求声明 [进行合理设计]：</span></span><br><span class="line"><span class="comment">-- (1)每个表的主外键；</span></span><br><span class="line"><span class="comment">-- (2)客户的姓名不能为空值；</span></span><br><span class="line"><span class="comment">-- (3)电邮不能够重复;</span></span><br><span class="line"><span class="comment">-- (4)客户的性别[男|女] check 枚举..</span></span><br><span class="line"><span class="comment">-- (5)单价unitprice 在 1.0 - 9999.99 之间 check</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 商品goods</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> goods (</span><br><span class="line">	goods_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	goods_name <span class="type">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	unitprice <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> </span><br><span class="line">		<span class="keyword">CHECK</span> (unitprice <span class="operator">&gt;=</span> <span class="number">1.0</span> <span class="keyword">AND</span> unitprice <span class="operator">&lt;=</span> <span class="number">9999.99</span>),</span><br><span class="line">	category <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">	provider <span class="type">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 客户customer（客户号customer_id,姓名name,住址address,电邮email性别sex,</span></span><br><span class="line"><span class="comment">-- 身份证card_Id);</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer(</span><br><span class="line">	customer_id <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">PRIMARY</span> KEY, <span class="comment">-- 程序员自己决定</span></span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	address <span class="type">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	email <span class="type">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	sex ENUM(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> ,  <span class="comment">-- 这里老师使用的枚举类型, 是生效</span></span><br><span class="line">	card_Id <span class="type">CHAR</span>(<span class="number">18</span>)); </span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 购买purchase（购买订单号order_id，客户号customer_id,商品号goods_id,</span></span><br><span class="line"><span class="comment">-- 购买数量nums);</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> purchase(</span><br><span class="line">	order_id <span class="type">INT</span> UNSIGNED <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	customer_id <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>, <span class="comment">-- 外键约束在后</span></span><br><span class="line">	goods_id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> , <span class="comment">-- 外键约束在后</span></span><br><span class="line">	nums <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY (customer_id) <span class="keyword">REFERENCES</span> customer(customer_id),</span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY (goods_id) <span class="keyword">REFERENCES</span> goods(goods_id));</span><br><span class="line"><span class="keyword">DESC</span> goods;</span><br><span class="line"><span class="keyword">DESC</span> customer;</span><br><span class="line"><span class="keyword">DESC</span> purchase;</span><br></pre></td></tr></table></figure>

<h3 id="8-6、自增长auto-increment"><a href="#8-6、自增长auto-increment" class="headerlink" title="8.6、自增长auto_increment"></a>8.6、自增长auto_increment</h3><p>​    在某张表中,存在一个id列(整数),我们希望在添加记录的时候,该列从1开始,自动增长</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 自增长</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t24(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">DESC</span> t24;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t24 (`name`) <span class="keyword">VALUES</span>(<span class="string">&#x27;tom&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t24;</span><br><span class="line"><span class="comment">-- 修改自增长的开始值</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t24 auto_increment <span class="operator">=</span> <span class="number">666</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t24 (`name`) <span class="keyword">VALUES</span>(<span class="string">&#x27;tom&#x27;</span>);</span><br></pre></td></tr></table></figure>



<h2 id="9、MySQL索引"><a href="#9、MySQL索引" class="headerlink" title="9、MySQL索引"></a>9、MySQL索引</h2><p>​    提起数据库性能,索引是物美价廉的东西了。不用加内存，不用改程序，不用调sql，查询速度就可能提高百倍千倍。</p>
<h3 id="9-1、索引速度优化"><a href="#9-1、索引速度优化" class="headerlink" title="9.1、索引速度优化"></a>9.1、索引速度优化</h3><p>​    创建测试数据库、表插入8000000条数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE tmp;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept( <span class="comment">/*部门表*/</span></span><br><span class="line">deptno MEDIUMINT   UNSIGNED  <span class="keyword">NOT</span> <span class="keyword">NULL</span>  <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">dname <span class="type">VARCHAR</span>(<span class="number">20</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>  <span class="keyword">DEFAULT</span> &quot;&quot;,</span><br><span class="line">loc <span class="type">VARCHAR</span>(<span class="number">13</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> &quot;&quot;</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">#创建表EMP雇员</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp</span><br><span class="line">(empno  MEDIUMINT UNSIGNED  <span class="keyword">NOT</span> <span class="keyword">NULL</span>  <span class="keyword">DEFAULT</span> <span class="number">0</span>, <span class="comment">/*编号*/</span></span><br><span class="line">ename <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> &quot;&quot;, <span class="comment">/*名字*/</span></span><br><span class="line">job <span class="type">VARCHAR</span>(<span class="number">9</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> &quot;&quot;,<span class="comment">/*工作*/</span></span><br><span class="line">mgr MEDIUMINT UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,<span class="comment">/*上级编号*/</span></span><br><span class="line">hiredate <span class="type">DATE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,<span class="comment">/*入职时间*/</span></span><br><span class="line">sal <span class="type">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,<span class="comment">/*薪水*/</span></span><br><span class="line">comm <span class="type">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,<span class="comment">/*红利*/</span></span><br><span class="line">deptno MEDIUMINT UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="comment">/*部门编号*/</span></span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">#工资级别表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> salgrade</span><br><span class="line">(</span><br><span class="line">grade MEDIUMINT UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">losal <span class="type">DECIMAL</span>(<span class="number">17</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">hisal <span class="type">DECIMAL</span>(<span class="number">17</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#测试数据</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="number">700</span>,<span class="number">1200</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="number">1201</span>,<span class="number">1400</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">3</span>,<span class="number">1401</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">4</span>,<span class="number">2001</span>,<span class="number">3000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">5</span>,<span class="number">3001</span>,<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">DELIMITER $$</span><br><span class="line"></span><br><span class="line">#创建一个函数，名字 rand_string，可以随机返回我指定的个数字符串</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> rand_string(n <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">VARCHAR</span>(<span class="number">255</span>) #该函数会返回一个字符串</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">#定义了一个变量 chars_str， 类型  <span class="type">varchar</span>(<span class="number">100</span>)</span><br><span class="line">#默认给 chars_str 初始值   <span class="string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#x27;</span></span><br><span class="line"> <span class="keyword">DECLARE</span> chars_str <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span></span><br><span class="line">   <span class="string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#x27;</span>; </span><br><span class="line"> <span class="keyword">DECLARE</span> return_str <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"> <span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>; </span><br><span class="line"> WHILE i <span class="operator">&lt;</span> n DO</span><br><span class="line">    # concat 函数 : 连接函数mysql函数</span><br><span class="line">   <span class="keyword">SET</span> return_str <span class="operator">=</span>CONCAT(return_str,<span class="built_in">SUBSTRING</span>(chars_str,<span class="built_in">FLOOR</span>(<span class="number">1</span><span class="operator">+</span>RAND()<span class="operator">*</span><span class="number">52</span>),<span class="number">1</span>));</span><br><span class="line">   <span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">END</span> WHILE;</span><br><span class="line">  <span class="keyword">RETURN</span> return_str;</span><br><span class="line">  <span class="keyword">END</span> $$</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> #这里我们又自定了一个函数,返回一个随机的部门号</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> rand_num( )</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">INT</span>(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">SET</span> i <span class="operator">=</span> <span class="built_in">FLOOR</span>(<span class="number">10</span><span class="operator">+</span>RAND()<span class="operator">*</span><span class="number">500</span>);</span><br><span class="line"><span class="keyword">RETURN</span> i;</span><br><span class="line"><span class="keyword">END</span> $$</span><br><span class="line"></span><br><span class="line"> #创建一个存储过程， 可以添加雇员</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> insert_emp(<span class="keyword">IN</span> <span class="keyword">START</span> <span class="type">INT</span>(<span class="number">10</span>),<span class="keyword">IN</span> max_num <span class="type">INT</span>(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">#<span class="keyword">set</span> autocommit <span class="operator">=</span><span class="number">0</span> 把autocommit设置成<span class="number">0</span></span><br><span class="line"> #autocommit <span class="operator">=</span> <span class="number">0</span> 含义: 不要自动提交</span><br><span class="line"> <span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>; #默认不提交<span class="keyword">sql</span>语句</span><br><span class="line"> REPEAT</span><br><span class="line"> <span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line"> #通过前面写的函数随机产生字符串和部门编号，然后加入到emp表</span><br><span class="line"> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span> ((<span class="keyword">START</span><span class="operator">+</span>i) ,rand_string(<span class="number">6</span>),<span class="string">&#x27;SALESMAN&#x27;</span>,<span class="number">0001</span>,CURDATE(),<span class="number">2000</span>,<span class="number">400</span>,rand_num());</span><br><span class="line">  UNTIL i <span class="operator">=</span> max_num</span><br><span class="line"> <span class="keyword">END</span> REPEAT;</span><br><span class="line"> #<span class="keyword">commit</span>整体提交所有<span class="keyword">sql</span>语句，提高效率</span><br><span class="line">   <span class="keyword">COMMIT</span>;</span><br><span class="line"> <span class="keyword">END</span> $$</span><br><span class="line"></span><br><span class="line"> #添加<span class="number">8000000</span>数据</span><br><span class="line"><span class="keyword">CALL</span> insert_emp(<span class="number">100001</span>,<span class="number">8000000</span>)$$</span><br><span class="line"></span><br><span class="line">#命令结束符，再重新设置为;</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询全部员工 8000000</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 没有创建索引根据员工编号查询员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> empno <span class="operator">=</span> <span class="number">1234567</span>; <span class="comment">-- 花费时间4.38s</span></span><br><span class="line"> <span class="comment">-- 为empno创建索引</span></span><br><span class="line"> <span class="keyword">CREATE</span> INDEX empno_index <span class="keyword">ON</span> emp(empno);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> empno <span class="operator">=</span> <span class="number">1234567</span>; <span class="comment">-- 花费时间0.023s</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">-- 我们根据ename查询,此时的ename没有索引</span></span><br><span class="line">  <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="operator">=</span> <span class="string">&#x27;rJwfmT&#x27;</span>; <span class="comment">-- 花费时间4.421s</span></span><br><span class="line">	<span class="comment">-- 为ename创建索引</span></span><br><span class="line">	<span class="keyword">CREATE</span> INDEX ename_index <span class="keyword">ON</span> emp(ename);</span><br><span class="line">	<span class="comment">-- 有了索引之后的ename查询时间</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="operator">=</span> <span class="string">&#x27;rJwfmT&#x27;</span>; <span class="comment">-- 花费时间0.070s</span></span><br></pre></td></tr></table></figure>

<h3 id="9-2、索引操作"><a href="#9-2、索引操作" class="headerlink" title="9.2、索引操作"></a>9.2、索引操作</h3><blockquote>
<ol>
<li>主键索引,主键自动的为主索引(类型primary key)</li>
<li>唯一索引(UNIQUE)</li>
<li>普通索引(INDEX)</li>
<li>全文索引(FULLTEXT)[适用于MyISAM]</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t25(</span><br><span class="line">	`id` <span class="type">INT</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">	</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 查询表是否有索引</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> t25;</span><br><span class="line"><span class="comment">-- 添加唯一索引 </span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX  name_unique_index <span class="keyword">ON</span> t25 (name);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t25 <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> INDEX (name);</span><br><span class="line"><span class="comment">-- 添加主键索引</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t25 <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加普通索引</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX id_index <span class="keyword">ON</span> t25 (id);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t25 <span class="keyword">ADD</span> INDEX (id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除索引</span></span><br><span class="line"><span class="keyword">DROP</span> INDEX id_index <span class="keyword">ON</span> t25;</span><br><span class="line"><span class="comment">-- 删除主键索引</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t25 <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询索引</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX t25;</span><br><span class="line"><span class="keyword">SHOW</span> INDEXES <span class="keyword">FROM</span> t25;</span><br><span class="line"><span class="keyword">SHOW</span> KEYS <span class="keyword">FROM</span> t25;</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>较频繁的作为查询条件字段应该创建索引</li>
<li>唯一性太差的字段不适合单独创建索引,即使频繁作为查询条件</li>
<li>更新非常频繁的字段不适合创建索引</li>
<li>不会出现在where子句中字段不该创建索引</li>
</ol>
</blockquote>
<h2 id="10、MySQL事务"><a href="#10、MySQL事务" class="headerlink" title="10、MySQL事务"></a>10、MySQL事务</h2><ul>
<li><p>什么是事务</p>
<p>事务用于保证数据的一致性，它由一组相关的dml语句组成，该组的dml语句要么全部成功，要么全部失败。如:转账就要用事务来处理,用以保证数据的一致性。</p>
</li>
<li><p>事务和锁</p>
<p>当执行事务操作时(dml语句),mysql会在表上加锁,防止其他用户改表的数据</p>
</li>
<li><p>mysql数据库控制事务的几个重要操作</p>
<p>start    transaction     —开始一个事务</p>
<p>savepoint    保存点名    –设置保存点</p>
<p>rollback to     保存点名    –回退事务</p>
<p>rollback    –回退全部事务</p>
<p>commint    –提交事务,所有的操作生效,不能回退</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t26(</span><br><span class="line">	`id` <span class="type">INT</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">	</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t26;</span><br><span class="line"><span class="comment">-- 开启事务</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="comment">-- 设置保存点a </span></span><br><span class="line"><span class="keyword">SAVEPOINT</span> a;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t26 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置保存点b</span></span><br><span class="line"><span class="keyword">SAVEPOINT</span> b;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t26 <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回退到b</span></span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> b;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交事务</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>回退事务:</p>
<p>​    在介绍回退事务前,先介绍一下保存点(savepoint)保存点是事务中的点,用于取消部分事务,当结束事务时(commit),会自动的删除该事务所定义的所有保存点,当执行事务回退时,通过指定保存点可以回退到指定的点。</p>
<p>提交事务：</p>
<p>​    使用commit语句就可以提交事务了，当执行commit语句之后，会确认事务的变化、结束事务、删除保存点、释放锁、数据生效。当使用commit语句结束事务之后，其他会话将可以看到事务变化后的新数据，所有数据就正式生效。</p>
</blockquote>
<blockquote>
<ol>
<li>如果不开启事务,默认情况下,dml操作是自动提交的,不能回滚。</li>
<li>如果开始一个事务，你没有创建保存点，你可以执行rollback，默认就是回退到你事务开始的状态</li>
<li>你也可以在这个事务中(还没有提交时),创建多个保存点</li>
<li>你可以在事务没有提交之前,选择回退到那个保存点</li>
<li>mysql的事务机制需要innodb的存储引擎才可以使用,myisam不好使</li>
<li>开始一个事务start transaction,set autocommit  = off</li>
</ol>
</blockquote>
<h3 id="10-1、隔离级别"><a href="#10-1、隔离级别" class="headerlink" title="10.1、隔离级别"></a>10.1、隔离级别</h3><p>​    多个连接开启各自事务操作数据库中数据时，数据库系统要负责隔离操作，以保证各个连接在获取数据时的准确性。</p>
<p>如果不做隔离则会产生脏读、不可重复读、幻读</p>
<p>脏读：当一个事务读取到另一个事务尚未提交的修改时，产生脏读</p>
<p>不可重复读：同一个查询在同一事务中多次进行，由于其他提交事务所做的修改或删除，每次返回不同的结果集，此时发生不可重复读取。</p>
<p>幻读：同一查询在同一事务中多次进行，由于其他提交事务，所做的插入操作，每次返回不同的结果集，此时发生幻读。</p>
<p><img src="https://images.hckun.cn/image-20211110214516471.png" alt="image-20211110214516471"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">查看mysql事务的隔离级别: <span class="keyword">select</span> @<span class="variable">@tx</span>_isolation;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> @<span class="variable">@tx</span>_isolation;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@tx</span>_isolation  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> REPEATABLE<span class="operator">-</span>READ <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">修改事务的隔离级别: <span class="keyword">set</span> session transaction isolation level read uncommitted</span><br></pre></td></tr></table></figure>

<p>事务的acid特性</p>
<p>原子性(Atomicity)原子性是指事务是一个不可分割的工作单位,事务中的操作要么都发生,要么都不发生</p>
<p>一致性(Consistency)事务必须使数据库从一个一致性状态变换到另一个一致性状态</p>
<p>隔离性(Isolation)事务的隔离性是多个用户并发访问数据库时,数据库为每一个用户开启的事务,不能被其他事务的操作数据所干扰,多个并发事务之间要相互隔离</p>
<p>持久性(Durability)持久性是指一个事务一旦被提交,它对数据库中数据的改变就是永久性的,接下来即使数据库发生故障也不应该对其有任何影响</p>
<h2 id="11、存储引擎"><a href="#11、存储引擎" class="headerlink" title="11、存储引擎"></a>11、存储引擎</h2><h3 id="11-1、引擎分类"><a href="#11-1、引擎分类" class="headerlink" title="11.1、引擎分类"></a>11.1、引擎分类</h3><ol>
<li><p>MySQL的表类型由存储引擎(Stirage Engines)决定,主要包括MyISAM、innoDB、Memory等</p>
</li>
<li><p>MySQL数据表主要支持六种类型，分别是CSV、Memory、ARCHIVE、MRG、MYISAM、InnoDB</p>
</li>
<li><p>这六种又分为两类，一类是事务安全型(transaction-safe),比如:InnoDB;其余都属于第二类,称为非事务安全型</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看所有引擎</span></span><br><span class="line"><span class="keyword">SHOW</span> ENGINES;</span><br></pre></td></tr></table></figure>

<p><img src="https://images.hckun.cn/image-20211113185109756.png" alt="image-20211113185109756"></p>
</li>
</ol>
<p><img src="https://images.hckun.cn/image-20211113185208594.png" alt="image-20211113185208594"></p>
<blockquote>
<ol>
<li>MYISAM不支持事务、也不支持外键、但其访问速度快，对事务完整性没有要求</li>
<li>InnoDB存储引擎提供了具有提交、回滚和崩溃恢复能力的事务安全。但是比起MyISAM存储引擎，InnoDB写的处理效率会差一些并且会占用更多的磁盘空间以保留数据和索引</li>
<li>MEMORY存储引擎使用存在内存中的内容创建表。每个MEMORY表只实际对应一个磁盘文件。MEMORY类型的表访问非常得快，因为它的数是放在内容中的，并且默认使用HASH索引。但是一旦服务关闭，表中的数据就会丢掉，表的结构还在</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- MyISAM存储引擎不支持事务</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t27(</span><br><span class="line">	`id` <span class="type">INT</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">)ENGINE MYISAM ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">SAVEPOINT</span> a;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t27 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t27;</span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> a;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- memory存储引擎数据存储在内存中,重启musql数据会消失表结构还存在</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t28(</span><br><span class="line">	`id` <span class="type">INT</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改表的存储引擎</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t28 ENGINE MEMORY;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t28 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t28;</span><br></pre></td></tr></table></figure>

<p><strong>如何选择存储引擎</strong></p>
<ol>
<li>如果你的应用不需要事务,处理的只是基本的CRUD操作,那么MyISAM是不二选择,速度快</li>
<li>如果需要支持事务,选择InnoDB</li>
<li>Memory存储引擎就是将数据存储在内存中,由于没有磁盘I/O的等待,速度极快。但由于是内存存储引擎，所做的任何修改在服务器重启后都将消失(经典用法 用户的在线状态)</li>
</ol>
<h2 id="12、视图"><a href="#12、视图" class="headerlink" title="12、视图"></a>12、视图</h2><p>​    视图是一个虚拟的表，其内容由查询定义。同真实的表一样，视图包含列，其数据来自对应的真实表(基表)</p>
<blockquote>
<ol>
<li>视图是根据基表来创建的视图是虚拟的表</li>
<li>视图也有列,数据来自基表</li>
<li>通过视图可以修改基表的数据</li>
<li>基表的改变,也会影响到视图的数据</li>
</ol>
</blockquote>
<p><strong>视图语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="keyword">create</span> <span class="keyword">view</span> 视图名 <span class="keyword">as</span> <span class="keyword">select</span>语句 <span class="comment">-- 创建视图</span></span><br><span class="line"><span class="number">2.</span> <span class="keyword">alter</span> <span class="keyword">view</span> 视图名 <span class="keyword">as</span> <span class="keyword">select</span>语句<span class="comment">-- 修改视图</span></span><br><span class="line"><span class="number">3.</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">view</span> 视图名<span class="comment">-- 查看视图</span></span><br><span class="line"><span class="number">4.</span> <span class="keyword">drop</span> <span class="keyword">view</span> 视图名<span class="number">1</span>,视图名<span class="number">2</span><span class="comment">-- 删除视图</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">-- 创建一个视图emp_view01,只能查询emp表的(empno、ename、job、deptno)信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> emp_view01 <span class="keyword">AS</span> <span class="keyword">SELECT</span> empno,ename,job,deptno <span class="keyword">FROM</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询视图</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp_view01;</span><br><span class="line"><span class="comment">-- 查询视图结构</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> emp_view01;</span><br><span class="line"><span class="comment">-- 修改视图</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> emp_view01 <span class="keyword">AS</span> <span class="keyword">SELECT</span> empno,ename,job <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">-- 删除视图</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> emp_view01;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 视图中再使用视图</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> emp_view02 <span class="keyword">AS</span> <span class="keyword">SELECT</span> empno,job <span class="keyword">FROM</span> emp_view01;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp_view02;</span><br></pre></td></tr></table></figure>

<p><strong>视图使用特点</strong></p>
<blockquote>
<ol>
<li>安全。一些数据表有着重要的信息。有些字段是保密的，不能让用户直接看到。这时就创建一个视图，在这张视图中只保留一部分字段。这样，用户就可以查询自己需要的字段，不能查看保密的字段。</li>
<li>性能。关系数据库的数据常常会分表存储，使用外键建立这些表之间的关系。这时，数据库查询通常会用到连接(JOIN)。这样做不但麻烦，效率相对也比较低。如果建立一个视图，将相关的表和字段组合在一起，就可以避免使用JOIN查询的数据。</li>
<li>灵活。如果系统中有一张旧表，这张表由于设计的问题，即将被废弃。然而，很多应用都是基于这张表，不易修改。这时就可以建立一张视图，视图中的数据直接映射到新建的表。这样，就可以很少做很多改动，也达到了升级数据表的目的。</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 针对 emp ，dept , 和   salgrade 张三表.创建一个视图 emp_view03，</span></span><br><span class="line"><span class="comment">-- 可以显示雇员编号，雇员名，雇员部门名称和 薪水级别[即使用三张表，构建一个视图]</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> emp_view03 <span class="keyword">AS</span> <span class="keyword">SELECT</span></span><br><span class="line">empno,</span><br><span class="line">ename,</span><br><span class="line">dname,</span><br><span class="line">grade </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	emp,</span><br><span class="line">	dept,</span><br><span class="line">	salgrade </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	emp.deptno <span class="operator">=</span> dept.deptno </span><br><span class="line">	<span class="keyword">AND</span> sal <span class="keyword">BETWEEN</span> losal </span><br><span class="line">	<span class="keyword">AND</span> hisal;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp_view03;</span><br></pre></td></tr></table></figure>

<h2 id="13、MySQL管理"><a href="#13、MySQL管理" class="headerlink" title="13、MySQL管理"></a>13、MySQL管理</h2><h3 id="13-1、用户管理"><a href="#13-1、用户管理" class="headerlink" title="13.1、用户管理"></a>13.1、用户管理</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建用户</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;hck&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="comment">-- 删除用户</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;hck&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"><span class="comment">-- 修改自己的密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="operator">=</span> PASSWORD(<span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line"><span class="comment">-- 修改他人的密码,需要修改密码的权限</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="operator">=</span> PASSWORD(<span class="string">&#x27;abcd&#x27;</span>);</span><br><span class="line"><span class="comment">-- root修改其他用户的密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">&#x27;hck&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="operator">=</span> PASSWORD(<span class="string">&#x27;abcde&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="13-2、权限管理"><a href="#13-2、权限管理" class="headerlink" title="13.2、权限管理"></a>13.2、权限管理</h3><p><strong>MySQL中的权限</strong></p>
<p><img src="https://images.hckun.cn/image-20211113205910788.png" alt="image-20211113205910788"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">给用户授权</span><br><span class="line">基本语法</span><br><span class="line">	<span class="keyword">grant</span> 权限列表 <span class="keyword">on</span> 库.对象名 <span class="keyword">to</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;登录位置&#x27;</span> [identified <span class="keyword">by</span> <span class="string">&#x27;密码&#x27;</span>]</span><br><span class="line">说明:</span><br><span class="line">	权限列表,多个权限用逗号分开</span><br><span class="line">	<span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> ......</span><br><span class="line">	<span class="keyword">grant</span> <span class="keyword">select</span>,<span class="keyword">delete</span>,<span class="keyword">create</span> <span class="keyword">on</span> ......</span><br><span class="line">	<span class="keyword">grant</span> <span class="keyword">all</span> [privileges] <span class="keyword">on</span> ...... <span class="operator">/</span><span class="operator">/</span>表示赋予该用户在该对象上的所有权限</span><br><span class="line">特别说明:</span><br><span class="line">	<span class="operator">*</span>.<span class="operator">*</span>:代表本系统中的所有数据库的所有对象(表、视图、存储过程)</span><br><span class="line">	库.<span class="operator">*</span>：代表某个数据库中的所有数据对象(表,视图,存储过程等)</span><br><span class="line">identified <span class="keyword">by</span>可以省略,也可以写出</span><br><span class="line">	如果用户存在,就是修改该用户的密码</span><br><span class="line">	如果该用户不存在,就是创建用户</span><br><span class="line"></span><br><span class="line">回收用户授权</span><br><span class="line">	<span class="keyword">revoke</span> 权限列表 <span class="keyword">on</span> 库.对象名 <span class="keyword">from</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;登录位置&#x27;</span></span><br><span class="line">权限生效指令</span><br><span class="line">	如果权限没有生效,可以执行下面命令:FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个用户</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;hck&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="comment">-- 创建库和表testdb下的news表</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE testdb;</span><br><span class="line">USE testdb;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> news(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 给用户分配查看news表和添加数据的权限</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>,<span class="keyword">INSERT</span> <span class="keyword">ON</span> testdb.news <span class="keyword">TO</span> <span class="string">&#x27;hck&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改用户密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">&#x27;hck&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>  <span class="operator">=</span> PASSWORD(<span class="string">&#x27;123&#x27;</span>);</span><br><span class="line"><span class="comment">-- 赋予删除权限</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">delete</span> <span class="keyword">ON</span> testdb.news <span class="keyword">TO</span> <span class="string">&#x27;hck&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"><span class="comment">-- 回收查看、添加和删除权限</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span>,<span class="keyword">DELETE</span>,<span class="keyword">INSERT</span> <span class="keyword">ON</span> testdb.news <span class="keyword">FROM</span> <span class="string">&#x27;hck&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"><span class="comment">-- 刷新权限</span></span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"><span class="comment">-- 删除用户</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;hck&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>细节说明</strong></p>
<blockquote>
<ol>
<li>在创建用户的时候,如果不指定Host,则为%,%表示所有IP都有连接权限</li>
<li>你也可以指定 create user ‘xxx‘@’192.168.1.%’ 表示xxx用户在192.168.0.*的ip可以登录mysql</li>
<li>在删除用户的时候,如果host不是%,需要明确指定’用户‘@’host值’</li>
</ol>
</blockquote>
<h2 id="14、SQL练习"><a href="#14、SQL练习" class="headerlink" title="14、SQL练习"></a>14、SQL练习</h2><blockquote>
<p>1、</p>
</blockquote>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看dept表和emp表的结构</span></span><br><span class="line"><span class="keyword">DESC</span> dept;</span><br><span class="line"><span class="keyword">DESC</span> emp;</span><br><span class="line"><span class="comment">-- 显示所有部门名称</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dept;</span><br><span class="line"><span class="comment">-- 显示所有雇员名及其全年收入13月(工资+补助)并指定列别名年收入</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,(sal<span class="operator">+</span>IFNULL(comm,<span class="number">0</span>))<span class="operator">*</span><span class="number">13</span> <span class="string">&#x27;年收入&#x27;</span> <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">-- 显示雇员超过2850的雇员姓名和工资</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal<span class="operator">&gt;</span><span class="number">2850</span>;</span><br><span class="line"><span class="comment">-- 显示工资不在1500到2850之间的所有雇员名及工资</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">1500</span> <span class="keyword">AND</span> <span class="number">2850</span>;</span><br><span class="line"><span class="comment">-- 显示编号为7566的雇员姓名及所在部门编号</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,deptno <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> empno <span class="operator">=</span> <span class="number">7566</span>;</span><br><span class="line"><span class="comment">-- 显示部门10和30中工资超过1500的雇员名及工资</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal<span class="operator">&gt;</span><span class="number">1500</span> <span class="keyword">AND</span> (deptno <span class="operator">=</span> <span class="number">10</span> <span class="keyword">OR</span> deptno <span class="operator">=</span> <span class="number">30</span>);</span><br><span class="line"><span class="comment">-- 显示无管理者的雇员名及岗位</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,job <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> mgr <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="comment">-- 显示在1991年2月1日到1991年5月1日之间雇用的雇员名,岗位及雇用日期,并以雇用日期进行排序</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,job,hiredate <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> hiredate <span class="keyword">BETWEEN</span> <span class="string">&#x27;1991-02-01&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;1991-05-01&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> hiredate;</span><br><span class="line"><span class="comment">-- 显示获得补助的所有雇员名,工资及补助,并以工资降序排列</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,sal,comm <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> comm <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> sal <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2、</p>
</blockquote>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 选择部门30中的所有员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 列出所有办事员(CLERK)的姓名,编号和部门编号</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,empno,deptno <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> job <span class="operator">=</span> <span class="string">&#x27;CLERK&#x27;</span>;</span><br><span class="line"><span class="comment">-- 找出佣金高于薪金的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> comm <span class="operator">&gt;</span> sal;</span><br><span class="line"><span class="comment">-- 找出佣金高于薪金60%的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> comm <span class="operator">&gt;</span> sal<span class="operator">*</span><span class="number">0.6</span>;</span><br><span class="line"><span class="comment">-- 找出部门10中所有经理(MANAGER)和部门20中所有办事员(CLERK)的详细资料</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> (deptno <span class="operator">=</span> <span class="number">10</span> <span class="keyword">AND</span> job <span class="operator">=</span> <span class="string">&#x27;MNAGER&#x27;</span>  ) <span class="keyword">OR</span> ( deptno <span class="operator">=</span> <span class="number">20</span> <span class="keyword">AND</span> job <span class="operator">=</span> <span class="string">&#x27;CLERK&#x27;</span>);</span><br><span class="line"><span class="comment">-- 找出部门10中所有经理(MANAGER),部门20中所有办事员(CLERK),还有既不是经理又不是办事员但其薪金大于或等于2000的所有员工的详细资料</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> (deptno <span class="operator">=</span> <span class="number">10</span> <span class="keyword">AND</span> job <span class="operator">=</span> <span class="string">&#x27;MNAGER&#x27;</span>  ) <span class="keyword">OR</span> ( deptno <span class="operator">=</span> <span class="number">20</span> <span class="keyword">AND</span> job <span class="operator">=</span> <span class="string">&#x27;CLERK&#x27;</span>) <span class="keyword">OR</span>(job <span class="operator">!=</span> <span class="string">&#x27;MNAGER&#x27;</span> <span class="keyword">AND</span> job <span class="operator">!=</span> <span class="string">&#x27;CLERK&#x27;</span> <span class="keyword">AND</span> sal<span class="operator">&gt;=</span><span class="number">2000</span>);</span><br><span class="line"><span class="comment">-- 找出收取佣金的员工的不同工作</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> comm <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> job;</span><br><span class="line"><span class="comment">-- 找出不收取佣金或收取佣金低于100的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> comm <span class="keyword">IS</span>  <span class="keyword">NULL</span> <span class="keyword">OR</span> comm <span class="operator">&lt;</span> <span class="number">100</span>;</span><br><span class="line"><span class="comment">-- 找出各月倒数第三天受雇的所有员工</span></span><br><span class="line"><span class="comment">-- LAST_DAY()获取月份的最后一天</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> LAST_DAY(hiredate) <span class="operator">=</span> DATE_ADD(hiredate,<span class="type">INTERVAL</span> <span class="number">2</span> <span class="keyword">DAY</span>);</span><br><span class="line"><span class="comment">-- 找出早于12年前受佣的员工</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span>   DATE_SUB(now(),<span class="type">INTERVAL</span> <span class="number">12</span> <span class="keyword">YEAR</span>) <span class="operator">&gt;</span> hiredate ;</span><br><span class="line"><span class="comment">-- 以首字母小写的方式显示所有员工姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> LCASE(<span class="keyword">LEFT</span>(ename,<span class="number">1</span>)) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">-- 显示正好为5个字符的员工的姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> ename <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> LENGTH(ename) <span class="operator">=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3、</p>
</blockquote>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示不带有&quot;R&quot;的员工的姓名.</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> 	<span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;%R%&#x27;</span></span><br><span class="line"><span class="comment">-- 显示所有员工姓名的前三个字符.</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(ename,<span class="number">3</span>) <span class="keyword">FROM</span> emp</span><br><span class="line"><span class="comment">-- 显示所有员工的姓名,用a替换所有&quot;A&quot;</span></span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(ename, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;a&#x27;</span>) 	<span class="keyword">FROM</span> emp</span><br><span class="line"><span class="comment">-- 显示满10年服务年限的员工的姓名和受雇日期.</span></span><br><span class="line"><span class="keyword">SELECT</span> ename, hiredate</span><br><span class="line">	<span class="keyword">FROM</span> emp</span><br><span class="line">	<span class="keyword">WHERE</span> DATE_ADD(hiredate, <span class="type">INTERVAL</span> <span class="number">10</span> <span class="keyword">YEAR</span>) <span class="operator">&lt;=</span> NOW()</span><br><span class="line"><span class="comment">-- 显示员工的姓名和受雇日期,根据其服务年限,将最老的员工排在最前面.</span></span><br><span class="line"><span class="keyword">SELECT</span> ename, hiredate</span><br><span class="line">	<span class="keyword">FROM</span> emp</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> hiredate </span><br><span class="line"><span class="comment">-- 显示所有员工的姓名、工作和薪金,按工作降序排序,若工作相同则按薪金排序.</span></span><br><span class="line"><span class="keyword">SELECT</span> ename, job, sal</span><br><span class="line">	<span class="keyword">FROM</span> emp</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> job <span class="keyword">DESC</span>, sal </span><br><span class="line"><span class="comment">-- 显示所有员工的姓名、加入公司的年份和月份,按受雇日期所在月排序,</span></span><br><span class="line"><span class="comment">-- 若月份相同则将最早年份的员工排在最前面.</span></span><br><span class="line"><span class="keyword">SELECT</span> ename, CONCAT(<span class="keyword">YEAR</span>(hiredate),<span class="string">&#x27;-&#x27;</span>, <span class="keyword">MONTH</span>(hiredate))</span><br><span class="line">	<span class="keyword">FROM</span> emp</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">MONTH</span>(hiredate), <span class="keyword">YEAR</span>(hiredate)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示在一个月为30天的情况所有员工的日薪金,忽略余数.</span></span><br><span class="line"><span class="keyword">SELECT</span> ename, <span class="built_in">FLOOR</span>(sal <span class="operator">/</span> <span class="number">30</span>), sal <span class="operator">/</span> <span class="number">30</span> </span><br><span class="line">	<span class="keyword">FROM</span> emp; </span><br><span class="line"><span class="comment">-- 找出在(任何年份的)2月受聘的所有员工。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line">	<span class="keyword">FROM</span> emp</span><br><span class="line">	<span class="keyword">WHERE</span> <span class="keyword">MONTH</span>(hiredate) <span class="operator">=</span> <span class="number">2</span></span><br><span class="line"><span class="comment">-- 对于每个员工,显示其加入公司的天数. </span></span><br><span class="line"><span class="keyword">SELECT</span> ename, DATEDIFF(NOW(), hiredate) </span><br><span class="line">	<span class="keyword">FROM</span> emp</span><br><span class="line"><span class="comment">-- 显示姓名字段的任何位置包含&quot;A&quot;的所有员工的姓名.</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">	<span class="keyword">FROM</span> emp</span><br><span class="line">	<span class="keyword">WHERE</span> ename <span class="keyword">LIKE</span> <span class="string">&#x27;%A%&#x27;</span></span><br><span class="line"><span class="comment">-- 以年月日的方式显示所有员工的服务年限.   (大概)</span></span><br><span class="line"><span class="comment">-- 思路 1. 先求出 工作了多少天 </span></span><br><span class="line"><span class="keyword">SELECT</span> ename, <span class="built_in">FLOOR</span>(DATEDIFF(NOW(), hiredate) <span class="operator">/</span> <span class="number">365</span>) <span class="keyword">AS</span> &quot; 工作年 &quot;, </span><br><span class="line">	<span class="built_in">FLOOR</span>((DATEDIFF(NOW(), hiredate) <span class="operator">%</span> <span class="number">365</span>) <span class="operator">/</span> <span class="number">31</span>) <span class="keyword">AS</span> &quot; 工作月 &quot;,</span><br><span class="line">	DATEDIFF(NOW(), hiredate) <span class="operator">%</span> <span class="number">31</span> <span class="keyword">AS</span> &quot; 工作天&quot;</span><br><span class="line">	<span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>4、</p>
</blockquote>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 列出至少有一个员工的所有部门</span></span><br><span class="line"><span class="keyword">SELECT</span> deptno,<span class="built_in">count</span>(deptno) number <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno <span class="keyword">HAVING</span> number <span class="operator">&gt;</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 列出薪金比“SMITH”多的所有员工</span></span><br><span class="line"><span class="keyword">SELECT</span> ename <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>);</span><br><span class="line"><span class="comment">-- 列出受雇日期晚于其直接上级的所有员工</span></span><br><span class="line"><span class="keyword">SELECT</span> worker.ename,leader.ename <span class="keyword">FROM</span> emp worker , emp leader <span class="keyword">WHERE</span> worker.hiredate <span class="operator">&gt;</span> leader.hiredate <span class="keyword">AND</span> worker.mgr <span class="operator">=</span> leader.empno; </span><br><span class="line"><span class="comment">-- 列出部门名称和这些部门的员工信息，同时列出那些没有员工的部门</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,emp.deptno,dept.dname <span class="keyword">FROM</span> emp <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.deptno <span class="operator">=</span> dept.deptno;</span><br><span class="line"><span class="comment">-- 列出所有“CLERK”（办事员）的姓名及其部门名称</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,emp.deptno,dept.dname <span class="keyword">FROM</span> emp ,dept <span class="keyword">WHERE</span> emp.deptno <span class="operator">=</span> dept.deptno <span class="keyword">AND</span> job <span class="operator">=</span> <span class="string">&#x27;CLERK&#x27;</span>;</span><br><span class="line"><span class="comment">-- 列出最低薪金大于1500的各种工作</span></span><br><span class="line"><span class="keyword">SELECT</span> job,<span class="built_in">min</span>(sal) sal <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> job <span class="keyword">HAVING</span> sal <span class="operator">&gt;</span> <span class="number">1500</span>;</span><br><span class="line"><span class="comment">-- 列出在部门“SALES”（销售部）工作的员工的姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> ename, dname</span><br><span class="line">	<span class="keyword">FROM</span> emp , dept</span><br><span class="line">	<span class="keyword">WHERE</span> emp.deptno <span class="operator">=</span> dept.deptno <span class="keyword">AND</span> dname <span class="operator">=</span> <span class="string">&#x27;SALES&#x27;</span>;</span><br><span class="line"><span class="comment">-- 列出薪金高于公司平均薪金的所有员工</span></span><br><span class="line"><span class="keyword">SELECT</span> ename <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(sal) <span class="keyword">FROM</span> emp);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>5、</p>
</blockquote>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 列出与“SCOTT”从事相同工作的所有员工</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,job <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> job <span class="operator">=</span> (<span class="keyword">SELECT</span> job <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="operator">=</span> <span class="string">&#x27;SCOTT&#x27;</span>) <span class="keyword">AND</span> ename <span class="operator">!=</span> <span class="string">&#x27;SCOTT&#x27;</span>;</span><br><span class="line"><span class="comment">-- 列出薪金高于所在部门30的工作的所有员工的薪金的员工姓名和薪金</span></span><br><span class="line"><span class="keyword">SELECT</span> ename , sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal <span class="operator">&gt;</span> <span class="keyword">ALL</span>(<span class="keyword">SELECT</span> sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno <span class="operator">=</span> <span class="number">30</span>);</span><br><span class="line"><span class="comment">-- 列出在每个部门工作的员工数量、平均工资和平均服务期限(时间单位)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="string">&#x27;部门员工数量&#x27;</span>, deptno, <span class="built_in">AVG</span>(sal) <span class="string">&#x27;部门平均工资&#x27;</span>,FORMAT(DATEDIFF(now(),hiredate)<span class="operator">/</span><span class="number">365</span>,<span class="number">2</span>) <span class="string">&#x27;部门平均工作期限(年)&#x27;</span>  <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno ;</span><br><span class="line"><span class="comment">-- 列出所有员工的姓名、部门名称和工资。</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,sal, dept.dname <span class="keyword">FROM</span> emp <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.deptno <span class="operator">=</span> dept.deptno;</span><br><span class="line"><span class="comment">-- 列出所有部门的详细信息和部门人数。</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="string">&#x27;部门人数&#x27;</span> <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno;</span><br><span class="line">	<span class="keyword">SELECT</span> dept.<span class="operator">*</span>,emp2.number   <span class="keyword">FROM</span> dept <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> (	<span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) number,deptno <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno) emp2 <span class="keyword">ON</span> dept.deptno <span class="operator">=</span> emp2.deptno;</span><br><span class="line"><span class="comment">-- 列出各种工作的最低工资</span></span><br><span class="line"><span class="keyword">SELECT</span> job,<span class="built_in">MIN</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> job;</span><br><span class="line"><span class="comment">-- 列出MANAGER（经理）的最低薪金</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,<span class="built_in">MIN</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span>;</span><br><span class="line"><span class="comment">-- 列出所有员工的年工资,按年薪从低到高排序</span></span><br><span class="line"><span class="keyword">SELECT</span> ename, (sal<span class="operator">+</span>IFNULL(comm,<span class="number">0</span>))<span class="operator">*</span><span class="number">12</span> year_sal <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> year_Sal ;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>6、</p>
</blockquote>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 设学校环境如下:一个系有若干个专业，每个专业一年只招一个班，每个班有若干个学生。</span></span><br><span class="line"><span class="comment">-- 现要建立关于系、学生、班级的数据库，关系模式为：</span></span><br><span class="line"><span class="comment">-- 班CLASS （班号classid，专业名subject，系名deptname，入学年份enrolltime，人数num）</span></span><br><span class="line"><span class="comment">-- 学生STUDENT （学号studentid，姓名name，年龄age，班号classid）</span></span><br><span class="line"><span class="comment">-- 系 DEPARTMENT （系号departmentid，系名deptname）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> DEPARTMENT (</span><br><span class="line">	departmentid <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	deptname <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>);</span><br><span class="line">	</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `class` (</span><br><span class="line">	classid <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	`subject` <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	deptname <span class="type">VARCHAR</span>(<span class="number">32</span>) , <span class="comment">-- 外键字段，在表定义后指定</span></span><br><span class="line">	enrolltime <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">2000</span>,</span><br><span class="line">	num <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY (deptname) <span class="keyword">REFERENCES</span>  DEPARTMENT(deptname));</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> hsp_student (</span><br><span class="line">	studentid <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	age <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">	classid <span class="type">INT</span>, <span class="comment">-- 外键</span></span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY (classid) <span class="keyword">REFERENCES</span>  `class`(classid));</span><br><span class="line">	</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> department <span class="keyword">VALUES</span>(<span class="string">&#x27;001&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> department <span class="keyword">VALUES</span>(<span class="string">&#x27;002&#x27;</span>,<span class="string">&#x27;计算机&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> department <span class="keyword">VALUES</span>(<span class="string">&#x27;003&#x27;</span>,<span class="string">&#x27;化学&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> department <span class="keyword">VALUES</span>(<span class="string">&#x27;004&#x27;</span>,<span class="string">&#x27;中文&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> department <span class="keyword">VALUES</span>(<span class="string">&#x27;005&#x27;</span>,<span class="string">&#x27;经济&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> class <span class="keyword">VALUES</span>(<span class="number">101</span>,<span class="string">&#x27;软件&#x27;</span>,<span class="string">&#x27;计算机&#x27;</span>,<span class="number">1995</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> class <span class="keyword">VALUES</span>(<span class="number">102</span>,<span class="string">&#x27;微电子&#x27;</span>,<span class="string">&#x27;计算机&#x27;</span>,<span class="number">1996</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> class <span class="keyword">VALUES</span>(<span class="number">111</span>,<span class="string">&#x27;无机化学&#x27;</span>,<span class="string">&#x27;化学&#x27;</span>,<span class="number">1995</span>,<span class="number">29</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> class <span class="keyword">VALUES</span>(<span class="number">112</span>,<span class="string">&#x27;高分子化学&#x27;</span>,<span class="string">&#x27;化学&#x27;</span>,<span class="number">1996</span>,<span class="number">25</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> class <span class="keyword">VALUES</span>(<span class="number">121</span>,<span class="string">&#x27;统计数学&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>,<span class="number">1995</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> class <span class="keyword">VALUES</span>(<span class="number">131</span>,<span class="string">&#x27;现代语言&#x27;</span>,<span class="string">&#x27;中文&#x27;</span>,<span class="number">1996</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> class <span class="keyword">VALUES</span>(<span class="number">141</span>,<span class="string">&#x27;国际贸易&#x27;</span>,<span class="string">&#x27;经济&#x27;</span>,<span class="number">1997</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> class <span class="keyword">VALUES</span>(<span class="number">142</span>,<span class="string">&#x27;国际金融&#x27;</span>,<span class="string">&#x27;经济&#x27;</span>,<span class="number">1996</span>,<span class="number">14</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8101</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">18</span>,<span class="number">101</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8102</span>,<span class="string">&#x27;钱四&#x27;</span>,<span class="number">16</span>,<span class="number">121</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8103</span>,<span class="string">&#x27;王玲&#x27;</span>,<span class="number">17</span>,<span class="number">131</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8105</span>,<span class="string">&#x27;李飞&#x27;</span>,<span class="number">19</span>,<span class="number">102</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8109</span>,<span class="string">&#x27;赵四&#x27;</span>,<span class="number">18</span>,<span class="number">141</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8110</span>,<span class="string">&#x27;李可&#x27;</span>,<span class="number">20</span>,<span class="number">142</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8201</span>,<span class="string">&#x27;张飞&#x27;</span>,<span class="number">18</span>,<span class="number">111</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8302</span>,<span class="string">&#x27;周瑜&#x27;</span>,<span class="number">16</span>,<span class="number">112</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8203</span>,<span class="string">&#x27;王亮&#x27;</span>,<span class="number">17</span>,<span class="number">111</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8305</span>,<span class="string">&#x27;董庆&#x27;</span>,<span class="number">19</span>,<span class="number">102</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8409</span>,<span class="string">&#x27;赵龙&#x27;</span>,<span class="number">18</span>,<span class="number">101</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> hsp_student <span class="keyword">VALUES</span>(<span class="number">8510</span>,<span class="string">&#x27;李龙&#x27;</span>,<span class="number">18</span>,<span class="number">101</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 找出所有姓李的学生</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>  <span class="keyword">FROM</span> hsp_student  <span class="keyword">WHERE</span> `name` <span class="keyword">LIKE</span> <span class="string">&#x27;李%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 列出所有开设超过1个专业的系的名字</span></span><br><span class="line"><span class="keyword">SELECT</span> deptname,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span>  class <span class="keyword">GROUP</span> <span class="keyword">BY</span>  deptname <span class="keyword">HAVING</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 列出人数大于等于30的系的编号和名字</span></span><br><span class="line"><span class="keyword">SELECT</span> department.deptname,department.departmentid   <span class="keyword">FROM</span> department,(<span class="keyword">SELECT</span> deptname,<span class="built_in">sum</span>(num)  number <span class="keyword">FROM</span>  class  <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptname <span class="keyword">HAVING</span> number <span class="operator">&gt;</span> <span class="number">30</span>) dept2 <span class="keyword">WHERE</span> department.deptname <span class="operator">=</span> dept2.deptname;</span><br><span class="line"><span class="comment">-- 学校又新增加了一个物理系，编号为006</span></span><br><span class="line"><span class="comment">-- 添加一条数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> department <span class="keyword">VALUES</span>(<span class="string">&#x27;006&#x27;</span>,<span class="string">&#x27;物理系&#x27;</span>);</span><br><span class="line"><span class="comment">-- 学生张三退学，请更新相关的表</span></span><br><span class="line"><span class="comment">-- 分析：1. 张三所在班级的人数-1 2. 将张三从学生表删除  3. 需要使用事务控制</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">UPDATE</span> class <span class="keyword">SET</span> num <span class="operator">=</span> num <span class="number">-1</span> <span class="keyword">WHERE</span> classid <span class="operator">=</span> (<span class="keyword">SELECT</span> classid <span class="keyword">FROM</span> hsp_student <span class="keyword">WHERE</span> `name` <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> hsp_student <span class="keyword">WHERE</span> `name` <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://www.hckun.cn">Java学习笔记</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.hckun.cn/post/30720df8.html">https://www.hckun.cn/post/30720df8.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.hckun.cn" target="_blank">Java学习笔记</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post_share"><div class="social-share" data-image="https://images.hckun.cn/1666330355.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/cef9bec2.html"><img class="prev-cover" src="https://images.hckun.cn/1666318763.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux基础</div></div></a></div><div class="next-post pull-right"><a href="/post/2c5af3bf.html"><img class="next-cover" src="https://images.hckun.cn/1667924081.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git基础使用</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/post/15d399c.html" title="MySQL数据迁移与恢复"><img class="cover" src="https://images.hckun.cn/1674809572.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-27</div><div class="title">MySQL数据迁移与恢复</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Java学习笔记</div><div class="author-info__description">少点以为,多点作为~</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" href="87975531@qq.com"><i class="fas fa-envelope"></i><span>E-mail</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=87975531&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:87975531@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客,喜欢请收藏!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81MySQL5-7-19%E5%AE%89%E8%A3%85"><span class="toc-text">1、MySQL5.7.19安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-text">2、数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.1、创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.2、查看所有数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E3%80%81%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%9A%E4%B9%89%E4%BF%A1%E6%81%AF"><span class="toc-text">2.3、查看当前数据库的定义信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.4、删除数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5%E3%80%81%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.5、备份数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6%E3%80%81%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.6、恢复数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%A1%A8%E7%BB%93%E6%9E%84%E6%93%8D%E4%BD%9C"><span class="toc-text">3.表结构操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E3%80%81%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-text">3.1、创建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E3%80%81MySQL%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.2、MySQL常用数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">数值类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E3%80%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%B1%BB%E5%9E%8B"><span class="toc-text">文本、二进制类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B"><span class="toc-text">时间日期类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQL%E7%BB%83%E4%B9%A0"><span class="toc-text">SQL练习</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E3%80%81%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="toc-text">3.3、修改表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E3%80%81%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-text">3.4、查看表结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5%E3%80%81%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-text">3.5、删除表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93CRUD"><span class="toc-text">4、数据库CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E3%80%81INSERT"><span class="toc-text">4.1、INSERT</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">注意事项:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E3%80%81UPDATE"><span class="toc-text">4.2、UPDATE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E3%80%81DELETE"><span class="toc-text">4.3、DELETE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E3%80%81SELECT"><span class="toc-text">4.4、SELECT</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8"><span class="toc-text">单表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">常用运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-text">排序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5%E3%80%81%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0"><span class="toc-text">4.5、统计函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#count"><span class="toc-text">count</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sum"><span class="toc-text">sum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#avg"><span class="toc-text">avg</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#max-min"><span class="toc-text">max&#x2F;min</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#group-by"><span class="toc-text">group by</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%87%BD%E6%95%B0"><span class="toc-text">5、函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-text">5.1、字符串函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E3%80%81%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-text">5.2、数学函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3%E3%80%81%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">5.3、日期函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4%E3%80%81%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="toc-text">5.4、加密函数系统函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5%E3%80%81%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-text">5.5、流程控制函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E6%9F%A5%E8%AF%A2%E5%A2%9E%E5%BC%BA"><span class="toc-text">6、查询增强</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E3%80%81%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E3%80%81%E6%8E%92%E5%BA%8F"><span class="toc-text">6.1、模糊查询、排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E3%80%81%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">6.2、分页查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-text">7、多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1%E3%80%81%E7%AC%9B%E5%8D%A1%E5%B0%94%E9%9B%86"><span class="toc-text">7.1、笛卡尔集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2%E3%80%81%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-text">7.2、自连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">7.3、子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4%E3%80%81%E8%A1%A8%E5%A4%8D%E5%88%B6%E5%92%8C%E5%8E%BB%E9%87%8D"><span class="toc-text">7.4、表复制和去重</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5%E3%80%81%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2"><span class="toc-text">7.5、合并查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6%E3%80%81%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-text">7.6、外连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81MySQL%E7%BA%A6%E6%9D%9F"><span class="toc-text">8、MySQL约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1%E3%80%81%E4%B8%BB%E9%94%AE"><span class="toc-text">8.1、主键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2%E3%80%81not-null"><span class="toc-text">8.2、not null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3%E3%80%81unique"><span class="toc-text">8.3、unique</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4%E3%80%81%E5%A4%96%E9%94%AE"><span class="toc-text">8.4、外键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5%E3%80%81check"><span class="toc-text">8.5、check</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6%E3%80%81%E8%87%AA%E5%A2%9E%E9%95%BFauto-increment"><span class="toc-text">8.6、自增长auto_increment</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81MySQL%E7%B4%A2%E5%BC%95"><span class="toc-text">9、MySQL索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1%E3%80%81%E7%B4%A2%E5%BC%95%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96"><span class="toc-text">9.1、索引速度优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2%E3%80%81%E7%B4%A2%E5%BC%95%E6%93%8D%E4%BD%9C"><span class="toc-text">9.2、索引操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%81MySQL%E4%BA%8B%E5%8A%A1"><span class="toc-text">10、MySQL事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1%E3%80%81%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-text">10.1、隔离级别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%81%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-text">11、存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1%E3%80%81%E5%BC%95%E6%93%8E%E5%88%86%E7%B1%BB"><span class="toc-text">11.1、引擎分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%81%E8%A7%86%E5%9B%BE"><span class="toc-text">12、视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E3%80%81MySQL%E7%AE%A1%E7%90%86"><span class="toc-text">13、MySQL管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1%E3%80%81%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-text">13.1、用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2%E3%80%81%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-text">13.2、权限管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E3%80%81SQL%E7%BB%83%E4%B9%A0"><span class="toc-text">14、SQL练习</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/776a71ac.html" title="Oracle数据库导入导出"><img src="https://images.hckun.cn/1676527840.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oracle数据库导入导出"/></a><div class="content"><a class="title" href="/post/776a71ac.html" title="Oracle数据库导入导出">Oracle数据库导入导出</a><time datetime="2023-02-16T06:00:00.000Z" title="发表于 2023-02-16 14:00:00">2023-02-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/fbfbeda4.html" title="HTML调用电脑摄像头并拍照"><img src="https://images.hckun.cn/1676474880.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HTML调用电脑摄像头并拍照"/></a><div class="content"><a class="title" href="/post/fbfbeda4.html" title="HTML调用电脑摄像头并拍照">HTML调用电脑摄像头并拍照</a><time datetime="2023-02-15T15:30:00.000Z" title="发表于 2023-02-15 23:30:00">2023-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/359b9644.html" title="Spring Cloud Alibaba (一) 服务注册与配置中心 Nacos"><img src="https://images.hckun.cn/1675173971.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Cloud Alibaba (一) 服务注册与配置中心 Nacos"/></a><div class="content"><a class="title" href="/post/359b9644.html" title="Spring Cloud Alibaba (一) 服务注册与配置中心 Nacos">Spring Cloud Alibaba (一) 服务注册与配置中心 Nacos</a><time datetime="2023-01-31T14:10:00.000Z" title="发表于 2023-01-31 22:10:00">2023-01-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/e335937b.html" title="Oracle数据库安装"><img src="https://images.hckun.cn/1675073931.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oracle数据库安装"/></a><div class="content"><a class="title" href="/post/e335937b.html" title="Oracle数据库安装">Oracle数据库安装</a><time datetime="2023-01-30T10:20:00.000Z" title="发表于 2023-01-30 18:20:00">2023-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/a45f57fe.html" title="Spring Cloud(十) 调用链路 Sleuth"><img src="https://images.hckun.cn/1674986014.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Cloud(十) 调用链路 Sleuth"/></a><div class="content"><a class="title" href="/post/a45f57fe.html" title="Spring Cloud(十) 调用链路 Sleuth">Spring Cloud(十) 调用链路 Sleuth</a><time datetime="2023-01-29T13:00:00.000Z" title="发表于 2023-01-29 21:00:00">2023-01-29</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Java学习笔记</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a data-v-7ac29aa2="" href="https://beian.miit.gov.cn/" target="_blank"> 豫ICP备2021010776号-1 </a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="false" data-text="富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>